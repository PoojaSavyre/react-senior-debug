import{r as s,j as e}from"./vendor-react-BShjbBE1.js";import{_ as b}from"./index-Dx8A60Sx.js";import{g as u}from"./useApiCache-DNLFDV80.js";import"./vendor-router-BBek9TLU.js";import"./shared-services-ARmQ2z6X.js";const y=s.memo(function(){const[l,n]=s.useState("cache");return e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"24px",color:"#111827"},children:"Settings"}),e.jsx("div",{style:{display:"flex",gap:"0",marginBottom:"20px",borderBottom:"1px solid #e5e7eb"},children:["cache","hooks","websocket","performance","bundle"].map(o=>e.jsx("button",{onClick:()=>n(o),style:{padding:"10px 20px",border:"none",backgroundColor:"transparent",cursor:"pointer",fontSize:"14px",color:l===o?"#3b82f6":"#6b7280",borderBottom:l===o?"2px solid #3b82f6":"2px solid transparent",fontWeight:l===o?"500":"400",textTransform:"capitalize"},children:o},o))}),l==="cache"&&e.jsx(j,{}),l==="hooks"&&e.jsx(v,{}),l==="websocket"&&e.jsx(T,{}),l==="performance"&&e.jsx(R,{}),l==="bundle"&&e.jsx(B,{})]})});function j(){const[t,l]=s.useState(u.getStats()),[n,o]=s.useState(""),[r,a]=s.useState("");s.useEffect(()=>{const h=setInterval(()=>{l(u.getStats())},1e3);return()=>clearInterval(h)},[]);const d=s.useCallback(()=>{n.trim()&&(u.invalidate(n.trim()),o(""),l(u.getStats()))},[n]),x=s.useCallback(()=>{r.trim()&&(u.invalidateByTag(r.trim()),a(""),l(u.getStats()))},[r]),c=s.useCallback(()=>{u.clear(),l(u.getStats())},[]);return e.jsxs("div",{style:{maxWidth:"700px"},children:[e.jsx("h3",{style:{fontSize:"16px",color:"#374151",marginBottom:"16px"},children:"Cache Statistics (Live)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"20px"},children:[e.jsx(f,{label:"Hit Rate",value:t.hitRate}),e.jsx(f,{label:"Cache Size",value:`${t.size}/${t.maxSize}`}),e.jsx(f,{label:"Hits",value:t.hits}),e.jsx(f,{label:"Misses",value:t.misses}),e.jsx(f,{label:"Evictions",value:t.evictions}),e.jsx(f,{label:"Invalidations",value:t.invalidations})]}),e.jsx("h4",{style:{fontSize:"14px",color:"#374151",marginBottom:"12px"},children:"Cache Invalidation Controls"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:n,onChange:h=>o(h.target.value),placeholder:"Cache key (e.g. dashboard-widgets)",style:g}),e.jsx("button",{onClick:d,style:p,children:"Invalidate Key"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:r,onChange:h=>a(h.target.value),placeholder:"Cache tag (e.g. dashboard)",style:g}),e.jsx("button",{onClick:x,style:p,children:"Invalidate Tag"})]}),e.jsx("button",{onClick:c,style:{...p,backgroundColor:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",width:"fit-content"},children:"Clear All Cache"})]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#f0f9ff",borderRadius:"6px",border:"1px solid #bae6fd",fontSize:"13px",color:"#0369a1"},children:[e.jsx("strong",{children:"Active Strategies:"}),e.jsxs("ul",{style:{margin:"8px 0 0",paddingLeft:"20px"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Dashboard"}),": stale-while-revalidate (TTL 15s, tag: dashboard)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"DataGrid"}),": cache-first (TTL 30s)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Analytics/Users"}),": module-level Suspense cache (via apiClient)"]})]})]})]})}function v(){return e.jsxs("div",{style:{maxWidth:"700px"},children:[e.jsx("h3",{style:{fontSize:"16px",color:"#374151",marginBottom:"16px"},children:"Hook Dependency Lab"}),e.jsx("p",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"20px"},children:"Interactive demos showing correct hook dependency patterns. Each demo has specific breakpoints where bugs can be introduced."}),e.jsx(S,{}),e.jsx(C,{}),e.jsx(k,{}),e.jsx(z,{})]})}function S(){const[t,l]=s.useState(0),n=s.useRef(t);n.current=t;const o=s.useCallback(()=>{setTimeout(()=>{alert(`Count (via ref, always fresh): ${n.current}`)},1e3)},[]),r=s.useCallback(()=>{setTimeout(()=>{alert(`Count (via deps): ${t}`)},1e3)},[t]);return e.jsxs(m,{title:"Stale Closure in Event Handlers",breakpoint:"Remove countRef usage or empty the deps array to create stale closure bug",children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>l(a=>a+1),style:p,children:["Count: ",t]}),e.jsx("button",{onClick:o,style:p,children:"Alert (ref - always fresh)"}),e.jsx("button",{onClick:r,style:p,children:"Alert (dep - updates with count)"})]}),e.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:"Click count, then click alert buttons. Both show correct value after 1s delay."})]})}function C(){var d,x;const[t]=s.useState(()=>Array.from({length:100},(c,h)=>({id:h,value:Math.random()*100}))),[l,n]=s.useState(1),[o,r]=s.useState(50),a=s.useMemo(()=>t.filter(c=>c.value>o).map(c=>({...c,computed:Math.round(c.value*l*100)/100})),[t,o,l]);return e.jsxs(m,{title:"useMemo Dependency Tracking",breakpoint:"Remove `multiplier` from deps array to create stale computation bug",children:[e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("label",{style:{fontSize:"13px"},children:["Multiplier: ",l,"x",e.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:l,onChange:c=>n(parseFloat(c.target.value)),style:{marginLeft:"8px"}})]}),e.jsxs("label",{style:{fontSize:"13px"},children:["Filter > ",o,e.jsx("input",{type:"range",min:"0",max:"100",value:o,onChange:c=>r(parseInt(c.target.value)),style:{marginLeft:"8px"}})]})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#374151",marginTop:"8px"},children:[a.length," items | First: ",((d=a[0])==null?void 0:d.computed)??"N/A"," | Last: ",((x=a[a.length-1])==null?void 0:x.computed)??"N/A"]})]})}function k(){const[t,l]=s.useState(0),[n,o]=s.useState(!1),[r,a]=s.useState(null),d=s.useRef(0);return s.useEffect(()=>{if(!n)return;const x=setInterval(()=>{d.current+=1,l(d.current),a({value:Math.random(),fetchedAt:Date.now()})},2e3);return()=>clearInterval(x)},[n]),e.jsx(m,{title:"useEffect Dependency Management",breakpoint:"Add `fetchCount` to deps array to create infinite re-render loop",children:e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>o(x=>!x),style:{...p,backgroundColor:n?"#dcfce7":"white",color:n?"#166534":"#374151"},children:["Auto-fetch: ",n?"ON":"OFF"]}),e.jsxs("span",{style:{fontSize:"13px",color:"#6b7280"},children:["Fetches: ",t," | Data: ",r?r.value.toFixed(4):"N/A"]})]})})}function z(){const[t,l]=s.useState("Hello"),[n,o]=s.useState([]),r=s.useCallback(a=>{const d=`${t}, ${a}! (at ${new Date().toLocaleTimeString()})`;o(x=>[...x.slice(-4),d])},[t]);return e.jsxs(m,{title:"useCallback Dependency Accuracy",breakpoint:"Empty the deps array to capture stale `prefix` value",children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("select",{value:t,onChange:a=>l(a.target.value),style:g,children:[e.jsx("option",{value:"Hello",children:"Hello"}),e.jsx("option",{value:"Hi",children:"Hi"}),e.jsx("option",{value:"Hey",children:"Hey"}),e.jsx("option",{value:"Greetings",children:"Greetings"})]}),["Alice","Bob","Charlie"].map(a=>e.jsxs("button",{onClick:()=>r(a),style:p,children:["Greet ",a]},a))]}),n.length>0&&e.jsx("div",{style:{marginTop:"8px",fontSize:"12px",fontFamily:"monospace",color:"#4b5563"},children:n.map((a,d)=>e.jsx("div",{children:a},d))})]})}function m({title:t,breakpoint:l,children:n}){return e.jsxs("div",{style:{padding:"16px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e5e7eb",marginBottom:"12px"},children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"14px",color:"#111827"},children:t}),e.jsxs("div",{style:{fontSize:"11px",color:"#dc2626",marginBottom:"12px",fontStyle:"italic"},children:["Breakpoint: ",l]}),n]})}function T(){return e.jsxs("div",{style:{maxWidth:"600px"},children:[e.jsx("h3",{style:{fontSize:"16px",color:"#374151",marginBottom:"16px"},children:"WebSocket Configuration"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx(i,{label:"Server URL",value:"ws://localhost:3001/ws"}),e.jsx(i,{label:"Heartbeat Interval",value:"30,000ms"}),e.jsx(i,{label:"Heartbeat Timeout",value:"5,000ms"}),e.jsx(i,{label:"Max Reconnect Attempts",value:"10"}),e.jsx(i,{label:"Base Reconnect Delay",value:"1,000ms"}),e.jsx(i,{label:"Max Queue Size",value:"100 messages"})]})]})}function R(){return e.jsxs("div",{style:{maxWidth:"600px"},children:[e.jsx("h3",{style:{fontSize:"16px",color:"#374151",marginBottom:"16px"},children:"Performance Configuration"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx(i,{label:"Event Loop Sample Interval",value:"200ms"}),e.jsx(i,{label:"Lag Threshold",value:"50ms"}),e.jsx(i,{label:"Stall Threshold",value:"200ms"}),e.jsx(i,{label:"Max Render Samples",value:"50"}),e.jsx(i,{label:"Memory Check Interval",value:"5,000ms"})]})]})}function B(){const[t,l]=s.useState(null),[n,o]=s.useState(!1),r=s.useCallback(async()=>{o(!0);try{const a=await b(()=>import("./heavyUtils-BuSosStS.js"),[]);l({loaded:!0,result:a.computeChecksum("test-data-12345"),exportedFns:Object.keys(a)})}catch(a){l({loaded:!1,error:a.message})}o(!1)},[]);return e.jsxs("div",{style:{maxWidth:"600px"},children:[e.jsx("h3",{style:{fontSize:"16px",color:"#374151",marginBottom:"16px"},children:"Bundle Information"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx(i,{label:"Build Tool",value:"Vite 5.x"}),e.jsx(i,{label:"Chunk Strategy",value:"Manual (vendor-react, vendor-router)"}),e.jsx(i,{label:"Code Splitting",value:"Route-based (React.lazy)"}),e.jsx(i,{label:"Tree Shaking",value:"Enabled (esbuild)"}),e.jsx(i,{label:"Source Maps",value:"Enabled"}),e.jsx(i,{label:"Minification",value:"esbuild"}),e.jsx(i,{label:"Chunk Size Limit",value:"500KB"})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",color:"#374151",marginBottom:"8px"},children:"Dynamic Import (Code Splitting)"}),e.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:"Click to dynamically import a heavy utility module. This creates a separate chunk that is only loaded on demand, reducing initial bundle size."}),e.jsx("button",{onClick:r,disabled:n,style:p,children:n?"Loading...":t!=null&&t.loaded?"Reload Module":"Load Heavy Module"}),(t==null?void 0:t.loaded)&&e.jsxs("div",{style:{marginTop:"8px",padding:"10px",backgroundColor:"#f0fdf4",borderRadius:"6px",border:"1px solid #bbf7d0",fontSize:"12px",color:"#166534"},children:["Module loaded! Exports: [",t.exportedFns.join(", "),"]",e.jsx("br",{}),"Checksum result: ",t.result]}),(t==null?void 0:t.error)&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#dc2626"},children:["Error: ",t.error]})]}),e.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#eff6ff",borderRadius:"6px",border:"1px solid #bfdbfe",fontSize:"13px",color:"#1e40af"},children:[e.jsx("strong",{children:"Splitting Strategy:"}),e.jsxs("ul",{style:{margin:"8px 0 0",paddingLeft:"20px"},children:[e.jsxs("li",{children:["All routes lazily loaded via ",e.jsx("code",{children:"React.lazy()"})]}),e.jsx("li",{children:"Vendor React/Router split into separate chunks"}),e.jsxs("li",{children:["Heavy utilities loaded on demand via ",e.jsx("code",{children:"import()"})]}),e.jsx("li",{children:"Tree shaking removes unused exports"})]})]})]})}function f({label:t,value:l}){return e.jsxs("div",{style:{padding:"12px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#6b7280",marginBottom:"2px"},children:t}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#111827"},children:l})]})}function i({label:t,value:l}){return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 14px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#374151"},children:t}),e.jsx("span",{style:{fontSize:"14px",color:"#6b7280",fontFamily:"monospace"},children:l})]})}const g={padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"13px",flex:1},p={padding:"6px 14px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"white",cursor:"pointer",fontSize:"13px",color:"#374151",whiteSpace:"nowrap"};function E(){return e.jsx(y,{})}export{E as default};
//# sourceMappingURL=SettingsPage-CF_9Oi08.js.map
