const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardPage-CmgzdigQ.js","assets/vendor-react-BShjbBE1.js","assets/useApiCache-DNLFDV80.js","assets/shared-services-ARmQ2z6X.js","assets/vendor-router-BBek9TLU.js","assets/LiveFeedPage-BH2tw1Mq.js","assets/UsersPage-DGV0bs7A.js","assets/AnalyticsPage-CpLnoW0F.js","assets/SettingsPage-awAQc5XT.js"])))=>i.map(i=>d[i]);
var $=Object.defineProperty;var F=(o,e,t)=>e in o?$(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var E=(o,e,t)=>F(o,typeof e!="symbol"?e+"":e,t);import{a as O,j as s,r as a,c as U}from"./vendor-react-BShjbBE1.js";import{B as q,R as Q,a as C,u as J,L as G}from"./vendor-router-BBek9TLU.js";import{C as V,a as K}from"./shared-services-ARmQ2z6X.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const Y="modulepreload",X=function(o){return"/"+o},A={},w=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(t.map(h=>{if(h=X(h),h in A)return;A[h]=!0;const p=h.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const u=document.createElement("link");if(u.rel=p?"stylesheet":Y,p||(u.as="script"),u.crossOrigin="",u.href=h,c&&u.setAttribute("nonce",c),document.head.appendChild(u),p)return new Promise((S,j)=>{u.addEventListener("load",S),u.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return r.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};class H extends O.Component{constructor(t){super(t);E(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){this.setState({errorInfo:n}),this.props.onError&&this.props.onError(t,n),console.error("[ErrorBoundary] Caught error:",t,n)}render(){var t;return this.state.hasError?this.props.fallback?this.props.fallback({error:this.state.error,errorInfo:this.state.errorInfo,reset:this.handleReset}):s.jsxs("div",{role:"alert",style:{padding:"20px",margin:"10px",borderRadius:"8px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#991b1b"},children:[s.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"16px"},children:"Something went wrong"}),s.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#b91c1c"},children:((t=this.state.error)==null?void 0:t.message)||"An unexpected error occurred"}),s.jsx("button",{onClick:this.handleReset,style:{padding:"8px 16px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Try Again"})]}):this.props.children}}const y={container:{display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"100px"},page:{minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px"},spinner:{width:"32px",height:"32px",border:"3px solid #e5e7eb",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 0.8s linear infinite"},skeleton:{backgroundColor:"#f3f4f6",borderRadius:"6px",animation:"pulse 1.5s ease-in-out infinite"},text:{fontSize:"14px",color:"#6b7280",margin:0}};function L({level:o="section",message:e="Loading..."}){return s.jsxs("div",{role:"status","aria-busy":"true","aria-label":e,style:o==="page"?y.page:y.container,children:[s.jsx("div",{style:y.spinner}),s.jsx("p",{style:y.text,children:e}),s.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      `})]})}function Z({width:o="100%",height:e="120px"}){return s.jsx("div",{role:"status","aria-busy":"true","aria-label":"Loading content",style:{...y.skeleton,width:o,height:e}})}function Te({count:o=5,itemHeight:e="60px"}){return s.jsxs("div",{role:"status","aria-busy":"true","aria-label":"Loading list",style:{display:"flex",flexDirection:"column",gap:"8px",padding:"10px"},children:[Array.from({length:o},(t,n)=>s.jsx("div",{style:{...y.skeleton,width:"100%",height:e}},n)),s.jsx("style",{children:`
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      `})]})}function Le(){return s.jsx("div",{role:"status","aria-busy":"true","aria-label":"Loading dashboard",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"16px",padding:"20px"},children:Array.from({length:6},(o,e)=>s.jsx(Z,{height:"140px"},e))})}function ee({children:o,fallback:e=null,errorFallback:t=null,onError:n=null,onReset:r=null,suspenseKey:i=void 0,level:l="section"}){const c=e||s.jsx(L,{level:l});return s.jsx(H,{fallback:t||void 0,onError:n,onReset:r,children:s.jsx(a.Suspense,{fallback:c,children:o},i)})}function te(o,e){const t=a.useRef(o);a.useEffect(()=>{t.current=o},[o]),a.useEffect(()=>{if(e==null)return;const r=setInterval(()=>{t.current()},e);return()=>{clearInterval(r)}},[e])}const I=a.createContext(null);function se({children:o,trackingEnabled:e=!0}){const[t,n]=a.useState({componentRenderCounts:{},totalRenders:0,slowRenders:0,memoryUsage:null}),r=a.useRef([]),i=a.useCallback((p,f)=>{r.current.push({component:p,time:f,timestamp:Date.now()}),r.current.length>500&&(r.current=r.current.slice(-500)),n(u=>({...u,totalRenders:u.totalRenders+1,slowRenders:f>16?u.slowRenders+1:u.slowRenders,componentRenderCounts:{...u.componentRenderCounts,[p]:(u.componentRenderCounts[p]||0)+1}}))},[]);te(()=>{e&&performance.memory&&n(p=>({...p,memoryUsage:{usedJSHeapSize:Math.round(performance.memory.usedJSHeapSize/1048576),totalJSHeapSize:Math.round(performance.memory.totalJSHeapSize/1048576),jsHeapSizeLimit:Math.round(performance.memory.jsHeapSizeLimit/1048576)}}))},e?5e3:null);const l=a.useCallback((p,f=20)=>{const u=r.current;return p?u.filter(S=>S.component===p).slice(-f):u.slice(-f)},[]),c=a.useCallback(()=>{r.current=[],n({componentRenderCounts:{},totalRenders:0,slowRenders:0,memoryUsage:null})},[]),h=a.useMemo(()=>({metrics:t,trackRender:i,getRenderLog:l,resetMetrics:c,trackingEnabled:e}),[t,i,l,c,e]);return s.jsx(I.Provider,{value:h,children:o})}function ne(){const o=a.useContext(I);if(!o)throw new Error("usePerformanceContext must be used within a PerformanceProvider");return o}class re{constructor(e={}){this.sampleInterval=e.sampleInterval||100,this.lagThreshold=e.lagThreshold||50,this.stallThreshold=e.stallThreshold||200,this.maxSamples=e.maxSamples||1e3,this.samples=[],this.listeners=new Map,this.monitorTimer=null,this.lastTick=0,this.isRunning=!1,this.stats={totalSamples:0,lagSpikes:0,stalls:0,maxLag:0,avgLag:0,currentLag:0}}start(){this.isRunning||(this.isRunning=!0,this.lastTick=performance.now(),this._tick())}stop(){this.isRunning=!1,this.monitorTimer&&(clearTimeout(this.monitorTimer),this.monitorTimer=null)}onLagSpike(e){return this._addListener("lagSpike",e)}onStall(e){return this._addListener("stall",e)}onSample(e){return this._addListener("sample",e)}getStats(){return{...this.stats}}getSamples(e){return this.samples.slice(-(e||this.samples.length))}getHealthScore(){if(this.samples.length===0)return 100;const e=this.samples.slice(-50),t=e.reduce((n,r)=>n+r.lag,0)/e.length;return t<5?100:t<16?90:t<33?75:t<50?60:t<100?40:t<200?20:10}reset(){this.samples=[],this.stats={totalSamples:0,lagSpikes:0,stalls:0,maxLag:0,avgLag:0,currentLag:0}}destroy(){this.stop(),this.listeners.clear(),this.samples=[]}_tick(){if(!this.isRunning)return;const e=performance.now(),t=this.sampleInterval,n=e-this.lastTick,r=Math.max(0,n-t);this.lastTick=e;const i={timestamp:Date.now(),expected:t,actual:Math.round(n*100)/100,lag:Math.round(r*100)/100};this._recordSample(i),this.monitorTimer=setTimeout(()=>this._tick(),this.sampleInterval)}_recordSample(e){this.samples.length>=this.maxSamples&&this.samples.shift(),this.samples.push(e),this.stats.totalSamples++,this.stats.currentLag=e.lag,this.stats.maxLag=Math.max(this.stats.maxLag,e.lag);const t=this.samples.slice(-100);this.stats.avgLag=Math.round(t.reduce((n,r)=>n+r.lag,0)/t.length*100)/100,this._emit("sample",e),e.lag>this.stallThreshold?(this.stats.stalls++,this._emit("stall",e)):e.lag>this.lagThreshold&&(this.stats.lagSpikes++,this._emit("lagSpike",e))}_addListener(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),()=>{const n=this.listeners.get(e);n&&n.delete(t)}}_emit(e,t){const n=this.listeners.get(e);n&&n.forEach(r=>{try{r(t)}catch(i){console.error(`[EventLoopMonitor] Listener error for ${e}:`,i)}})}}function ae(o={}){const{sampleInterval:e=200,enabled:t=!0}=o,[n,r]=a.useState({score:100,currentLag:0,avgLag:0,maxLag:0,lagSpikes:0,stalls:0,isHealthy:!0}),i=a.useRef(null);a.useEffect(()=>{if(!t)return;const h=new re({sampleInterval:e});i.current=h;const p=h.onSample(()=>{const f=h.getStats(),u=h.getHealthScore();r({score:u,currentLag:f.currentLag,avgLag:f.avgLag,maxLag:f.maxLag,lagSpikes:f.lagSpikes,stalls:f.stalls,isHealthy:u>60})});return h.start(),()=>{p(),h.destroy(),i.current=null}},[e,t]);const l=a.useCallback(()=>{i.current&&(i.current.reset(),r({score:100,currentLag:0,avgLag:0,maxLag:0,lagSpikes:0,stalls:0,isHealthy:!0}))},[]),c=a.useCallback((h=50)=>i.current?i.current.getSamples(h):[],[]);return{...n,reset:l,getSamples:c}}const oe=a.memo(function(){const[e,t]=a.useState(!1),{metrics:n}=ne(),r=ae({enabled:e}),i=a.useCallback(()=>{t(c=>!c)},[]),l={position:"fixed",bottom:"10px",right:"10px",zIndex:9999,fontFamily:"monospace",fontSize:"12px",backgroundColor:"rgba(0, 0, 0, 0.85)",color:"#e5e7eb",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",maxWidth:e?"320px":"44px",overflow:"hidden",transition:"max-width 0.2s ease"};return e?s.jsx("div",{style:l,children:s.jsxs("div",{style:{padding:"12px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[s.jsx("span",{style:{fontWeight:"bold",color:"#10b981"},children:"âš¡ Performance"}),s.jsx("button",{onClick:i,style:{border:"none",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"14px"},children:"âœ•"})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[s.jsx(b,{label:"Total Renders",value:n.totalRenders}),s.jsx(b,{label:"Slow Renders",value:n.slowRenders,warn:n.slowRenders>5}),s.jsx("div",{style:{borderTop:"1px solid #374151",margin:"4px 0"}}),s.jsx(b,{label:"Event Loop Score",value:`${r.score}/100`,warn:r.score<60}),s.jsx(b,{label:"Current Lag",value:`${r.currentLag}ms`,warn:r.currentLag>50}),s.jsx(b,{label:"Avg Lag",value:`${r.avgLag}ms`}),s.jsx(b,{label:"Lag Spikes",value:r.lagSpikes,warn:r.lagSpikes>10}),n.memoryUsage&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{borderTop:"1px solid #374151",margin:"4px 0"}}),s.jsx(b,{label:"JS Heap",value:`${n.memoryUsage.usedJSHeapSize}MB`})]}),s.jsx("div",{style:{borderTop:"1px solid #374151",margin:"4px 0"}}),s.jsxs("div",{style:{fontSize:"10px",color:"#6b7280"},children:["Components: ",Object.keys(n.componentRenderCounts).length," tracked"]})]})]})}):s.jsx("div",{style:l,children:s.jsx("button",{onClick:i,style:{width:"44px",height:"44px",border:"none",background:"transparent",color:"#10b981",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Performance Monitor",children:"âš¡"})})}),b=a.memo(function({label:e,value:t,warn:n=!1}){return s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{style:{color:"#9ca3af"},children:e}),s.jsx("span",{style:{color:n?"#ef4444":"#d1d5db",fontWeight:n?"bold":"normal"},children:t})]})}),g={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};class ie{constructor(e,t={}){this.url=e,this.options={protocols:t.protocols||[],authToken:t.authToken||null,maxReconnectAttempts:t.maxReconnectAttempts||10,baseReconnectDelay:t.baseReconnectDelay||1e3,maxReconnectDelay:t.maxReconnectDelay||3e4,heartbeatInterval:t.heartbeatInterval||3e4,heartbeatTimeout:t.heartbeatTimeout||5e3,maxQueueSize:t.maxQueueSize||100,enableBinary:t.enableBinary||!1,onOpen:t.onOpen||null,onClose:t.onClose||null,onError:t.onError||null,onMessage:t.onMessage||null,onAuthSuccess:t.onAuthSuccess||null,onAuthFailed:t.onAuthFailed||null,onReconnecting:t.onReconnecting||null},this.ws=null,this.state=g.CLOSED,this.reconnectAttempts=0,this.reconnectTimer=null,this.heartbeatTimer=null,this.heartbeatTimeoutTimer=null,this.messageQueue=[],this.messageHandlers=new Map,this.pendingMessages=new Map,this.messageIdCounter=0,this.isIntentionallyClosed=!1,this.authenticated=!1,this.connectionId=null,this.lastHeartbeatAt=null,this.heartbeatMissCount=0,this.messageSequence=0,this.outOfOrderCount=0,this.lastReceivedSequence=-1}connect(){if(this.ws&&(this.state===g.CONNECTING||this.state===g.OPEN)){console.warn("[WSManager] Already connected or connecting");return}this.isIntentionallyClosed=!1,this.state=g.CONNECTING;try{this.ws=new WebSocket(this.url,this.options.protocols),this.options.enableBinary&&(this.ws.binaryType="arraybuffer"),this.ws.onopen=this._handleOpen.bind(this),this.ws.onclose=this._handleClose.bind(this),this.ws.onerror=this._handleError.bind(this),this.ws.onmessage=this._handleMessage.bind(this)}catch(e){console.error("[WSManager] Connection error:",e),this._scheduleReconnect()}}disconnect(e=1e3,t="Client disconnect"){this.isIntentionallyClosed=!0,this._clearTimers(),this.ws&&(this.state=g.CLOSING,this.ws.close(e,t)),this.authenticated=!1,this.connectionId=null,this.state=g.CLOSED}send(e,t={}){const n={id:`msg-${++this.messageIdCounter}`,type:e,payload:t,timestamp:Date.now()};return this.ws&&this.ws.readyState===g.OPEN?this._sendRaw(n):this._enqueueMessage(n),n.id}sendBinary(e){if(!this.options.enableBinary){console.warn("[WSManager] Binary mode not enabled");return}if(this.ws&&this.ws.readyState===g.OPEN){const t=e instanceof ArrayBuffer?e:new TextEncoder().encode(JSON.stringify(e)).buffer;this.ws.send(t)}}subscribe(e,t){return this.messageHandlers.has(e)||this.messageHandlers.set(e,new Set),this.messageHandlers.get(e).add(t),()=>{const n=this.messageHandlers.get(e);n&&(n.delete(t),n.size===0&&this.messageHandlers.delete(e))}}getState(){return{connected:this.state===g.OPEN,authenticated:this.authenticated,connectionId:this.connectionId,reconnectAttempts:this.reconnectAttempts,queuedMessages:this.messageQueue.length,state:this.state,lastHeartbeatAt:this.lastHeartbeatAt,heartbeatMissCount:this.heartbeatMissCount,messageSequence:this.messageSequence,outOfOrderCount:this.outOfOrderCount}}_handleOpen(){console.log("[WSManager] Connected"),this.state=g.OPEN,this.reconnectAttempts=0,this._flushQueue(),this._startHeartbeatMonitor(),this.options.onOpen&&this.options.onOpen()}_handleClose(e){console.log(`[WSManager] Closed (code: ${e.code}, reason: ${e.reason})`),this.state=g.CLOSED,this.authenticated=!1,this._clearTimers(),this.options.onClose&&this.options.onClose(e),this.isIntentionallyClosed||this._scheduleReconnect()}_handleError(e){console.error("[WSManager] Error:",e),this.options.onError&&this.options.onError(e)}_handleMessage(e){var n;let t;if(e.data instanceof ArrayBuffer){const r=new TextDecoder().decode(e.data);try{t=JSON.parse(r)}catch{this._notifyHandlers("binary",e.data);return}}else try{t=JSON.parse(e.data)}catch(r){console.error("[WSManager] Failed to parse message:",r);return}switch(t.type){case"connection:established":this.connectionId=(n=t.payload)==null?void 0:n.clientId,this.options.authToken&&this.send("auth:token",{token:this.options.authToken});break;case"auth:required":this.options.authToken&&this.send("auth:token",{token:this.options.authToken});break;case"auth:success":this.authenticated=!0,this.options.onAuthSuccess&&this.options.onAuthSuccess(t.payload);break;case"auth:failed":this.authenticated=!1,this.options.onAuthFailed&&this.options.onAuthFailed(t.payload);break;case"heartbeat:ping":this.send("heartbeat:pong",{timestamp:Date.now()}),this._resetHeartbeatTimeout(),this.lastHeartbeatAt=Date.now();break}this._notifyHandlers(t.type,t.payload),this.options.onMessage&&this.options.onMessage(t)}_notifyHandlers(e,t){const n=this.messageHandlers.get(e);n&&n.forEach(r=>{try{r(t)}catch(i){console.error(`[WSManager] Handler error for ${e}:`,i)}})}_sendRaw(e){try{this.ws.send(JSON.stringify(e))}catch(t){console.error("[WSManager] Send error:",t),this._enqueueMessage(e)}}_enqueueMessage(e){this.messageQueue.length>=this.options.maxQueueSize&&(console.warn("[WSManager] Message queue overflow, dropping oldest message"),this.messageQueue.shift()),this.messageQueue.push(e)}_flushQueue(){var e;for(;this.messageQueue.length>0&&((e=this.ws)==null?void 0:e.readyState)===g.OPEN;){const t=this.messageQueue.shift();this._sendRaw(t)}}_scheduleReconnect(){if(this.reconnectAttempts>=this.options.maxReconnectAttempts){console.error("[WSManager] Max reconnect attempts reached");return}this.reconnectAttempts++;const e=Math.min(this.options.baseReconnectDelay*Math.pow(2,this.reconnectAttempts-1)+Math.random()*1e3,this.options.maxReconnectDelay);console.log(`[WSManager] Reconnecting in ${Math.round(e)}ms (attempt ${this.reconnectAttempts}/${this.options.maxReconnectAttempts})`),this.options.onReconnecting&&this.options.onReconnecting(this.reconnectAttempts,e),this.reconnectTimer=setTimeout(()=>{this.connect()},e)}_startHeartbeatMonitor(){this._clearHeartbeatTimeout(),this.heartbeatMissCount=0,this.lastHeartbeatAt=Date.now(),this.heartbeatTimer=setInterval(()=>{var t;if(!this.lastHeartbeatAt)return;const e=Date.now()-this.lastHeartbeatAt;e>this.options.heartbeatInterval+this.options.heartbeatTimeout&&(this.heartbeatMissCount++,console.warn(`[WSManager] Heartbeat missed (${this.heartbeatMissCount} total)`),this._notifyHandlers("heartbeat:missed",{missCount:this.heartbeatMissCount,lastHeartbeatAt:this.lastHeartbeatAt,elapsed:e}),this.heartbeatMissCount>=3&&(console.error("[WSManager] Connection appears dead (3 missed heartbeats)"),this._notifyHandlers("heartbeat:dead",{missCount:this.heartbeatMissCount}),(t=this.ws)==null||t.close(4e3,"Heartbeat timeout")))},this.options.heartbeatInterval)}_resetHeartbeatTimeout(){this.heartbeatMissCount=0}_clearHeartbeatTimeout(){clearTimeout(this.heartbeatTimeoutTimer),this.heartbeatTimeoutTimer=null}trackMessageSequence(e){this.messageSequence++,e!==void 0&&e<=this.lastReceivedSequence&&this.outOfOrderCount++,e!==void 0&&(this.lastReceivedSequence=e)}_clearTimers(){clearTimeout(this.reconnectTimer),clearInterval(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer),this.reconnectTimer=null,this.heartbeatTimer=null,this.heartbeatTimeoutTimer=null}destroy(){this.disconnect(),this.messageHandlers.clear(),this.messageQueue=[],this.pendingMessages.clear()}}const le=[];function ce(o,e={}){const{authToken:t=null,autoConnect:n=!0,onMessage:r=null,onOpen:i=null,onClose:l=null,onError:c=null,protocols:h=le,reconnectAttempts:p=10}=e,[f,u]=a.useState({connected:!1,authenticated:!1,reconnecting:!1,reconnectAttempt:0,error:null}),[S,j]=a.useState(null),k=a.useRef(r),v=a.useRef(i),M=a.useRef(l),T=a.useRef(c);a.useEffect(()=>{k.current=r},[r]),a.useEffect(()=>{v.current=i},[i]),a.useEffect(()=>{M.current=l},[l]),a.useEffect(()=>{T.current=c},[c]);const m=a.useRef(null),_=a.useMemo(()=>({authToken:t,protocols:h,maxReconnectAttempts:p,onOpen:()=>{u(d=>({...d,connected:!0,reconnecting:!1,reconnectAttempt:0,error:null})),v.current&&v.current()},onClose:d=>{u(x=>({...x,connected:!1,authenticated:!1})),M.current&&M.current(d)},onError:d=>{u(x=>({...x,error:d})),T.current&&T.current(d)},onMessage:d=>{j(d),k.current&&k.current(d)},onAuthSuccess:()=>{u(d=>({...d,authenticated:!0}))},onAuthFailed:()=>{u(d=>({...d,authenticated:!1,error:new Error("Authentication failed")}))},onReconnecting:d=>{u(x=>({...x,reconnecting:!0,reconnectAttempt:d}))}}),[t,h,p]);a.useEffect(()=>{if(!o)return;const d=new ie(o,_);return m.current=d,n&&d.connect(),()=>{d.destroy(),m.current=null}},[o,_,n]);const D=a.useCallback((d,x)=>m.current?m.current.send(d,x):(console.warn("[useWebSocket] Cannot send: not connected"),null),[]),z=a.useCallback((d,x)=>m.current?m.current.subscribe(d,x):()=>{},[]),W=a.useCallback(()=>{m.current&&m.current.connect()},[]),B=a.useCallback(()=>{m.current&&m.current.disconnect()},[]),N=a.useCallback(()=>m.current?m.current.getState():null,[]);return{...f,lastMessage:S,send:D,subscribe:z,connect:W,disconnect:B,getState:N}}const P=a.createContext(null);function ue({children:o,url:e,authToken:t}){const[n,r]=a.useState([]),i=a.useCallback(p=>{r(f=>{const u=[...f,p];return u.length>200?u.slice(-200):u})},[]),l=ce(e,{authToken:t,autoConnect:!0,onMessage:i}),c=a.useCallback(()=>{r([])},[]),h=a.useMemo(()=>({...l,messages:n,clearMessages:c}),[l,n,c]);return s.jsx(P.Provider,{value:h,children:o})}function _e(){const o=a.useContext(P);if(!o)throw new Error("useWebSocketContext must be used within a WebSocketProvider");return o}const he=a.createContext(null);function de({children:o,options:e={}}){const[,t]=a.useState(0),n=a.useMemo(()=>new V(e),[]),r=a.useMemo(()=>{const c=new K(n);return c.registerMutationRule("users","create",["collection:users"]),c.registerMutationRule("users","update",["collection:users",h=>`user:${h.id}`]),c.registerMutationRule("users","delete",["collection:users",h=>`user:${h.id}`]),c},[n]),i=a.useCallback((c,h,p)=>{r.onMutation(c,h,p),t(f=>f+1)},[r]),l=a.useMemo(()=>({cache:n,invalidator:r,invalidateAndRefresh:i,getStats:()=>n.getStats()}),[n,r,i]);return s.jsx(he.Provider,{value:l,children:o})}const pe=`ws://${window.location.hostname}:3001/ws`,fe="valid-auth-token-2024",me=a.lazy(()=>w(()=>import("./DashboardPage-CmgzdigQ.js"),__vite__mapDeps([0,1,2,3,4]))),ge=a.lazy(()=>w(()=>import("./LiveFeedPage-BH2tw1Mq.js"),__vite__mapDeps([5,1,4,3]))),xe=a.lazy(()=>w(()=>import("./UsersPage-DGV0bs7A.js"),__vite__mapDeps([6,1,3,4]))),be=a.lazy(()=>w(()=>import("./AnalyticsPage-CpLnoW0F.js"),__vite__mapDeps([7,1,3,4]))),ye=a.lazy(()=>w(()=>import("./SettingsPage-awAQc5XT.js"),__vite__mapDeps([8,1,2,3,4])));function Se({children:o}){const e=J();return s.jsxs("div",{style:{display:"flex",minHeight:"100vh",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[s.jsx(Ce,{currentPath:e.pathname}),s.jsx("main",{style:{flex:1,backgroundColor:"#f9fafb",overflow:"auto"},children:o})]})}function Ce({currentPath:o}){const e=[{path:"/",label:"Dashboard",icon:"ðŸ“Š"},{path:"/feed",label:"Live Feed",icon:"ðŸ“¡"},{path:"/users",label:"Users",icon:"ðŸ‘¥"},{path:"/analytics",label:"Analytics",icon:"ðŸ“ˆ"},{path:"/settings",label:"Settings",icon:"âš™ï¸"}];return s.jsxs("nav",{style:{width:"220px",backgroundColor:"#111827",color:"#e5e7eb",padding:"20px 0",display:"flex",flexDirection:"column",flexShrink:0},children:[s.jsxs("div",{style:{padding:"0 20px 20px",borderBottom:"1px solid #1f2937",marginBottom:"10px"},children:[s.jsx("h1",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:"white"},children:"Analytics Hub"}),s.jsx("p",{style:{margin:"4px 0 0",fontSize:"12px",color:"#6b7280"},children:"Real-time Dashboard"})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px",padding:"0 8px"},children:e.map(t=>{const n=o===t.path;return s.jsxs(G,{to:t.path,style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"6px",color:n?"white":"#9ca3af",backgroundColor:n?"#1f2937":"transparent",textDecoration:"none",fontSize:"14px",fontWeight:n?"500":"400",transition:"all 0.1s"},children:[s.jsx("span",{style:{fontSize:"16px"},children:t.icon}),t.label]},t.path)})})]})}function R({children:o}){return s.jsx(ee,{fallback:s.jsx(L,{level:"page",message:"Loading page..."}),level:"page",children:o})}function Re(){return s.jsx(O.StrictMode,{children:s.jsx(H,{fallback:({error:o,reset:e})=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"40px"},children:[s.jsx("h1",{style:{color:"#dc2626"},children:"Application Error"}),s.jsx("p",{style:{color:"#6b7280"},children:o==null?void 0:o.message}),s.jsx("button",{onClick:e,style:{padding:"10px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},children:"Reload Application"})]}),children:s.jsx(a.Suspense,{fallback:s.jsx(L,{level:"page",message:"Loading application..."}),children:s.jsx(q,{children:s.jsx(se,{trackingEnabled:!0,children:s.jsx(de,{options:{maxEntries:200,defaultTTL:6e4},children:s.jsxs(ue,{url:pe,authToken:fe,children:[s.jsx(Se,{children:s.jsxs(Q,{children:[s.jsx(C,{path:"/",element:s.jsx(R,{children:s.jsx(me,{})})}),s.jsx(C,{path:"/feed",element:s.jsx(R,{children:s.jsx(ge,{})})}),s.jsx(C,{path:"/users",element:s.jsx(R,{children:s.jsx(xe,{})})}),s.jsx(C,{path:"/analytics",element:s.jsx(R,{children:s.jsx(be,{})})}),s.jsx(C,{path:"/settings",element:s.jsx(R,{children:s.jsx(ye,{})})})]})}),s.jsx(oe,{})]})})})})})})})}const we=U.createRoot(document.getElementById("root"));we.render(s.jsx(Re,{}));export{ee as S,w as _,ne as a,Z as b,Te as c,Le as d,ae as e,_e as u};
//# sourceMappingURL=index-BatblRAa.js.map
