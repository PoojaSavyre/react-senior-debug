{"version":3,"file":"LiveFeedPage-BH2tw1Mq.js","sources":["../../src/components/feed/FeedItem.jsx","../../src/components/feed/FeedFilter.jsx","../../src/components/feed/MessageComposer.jsx","../../src/components/feed/LiveFeed.jsx","../../src/pages/LiveFeedPage.jsx"],"sourcesContent":["/**\r\n * FeedItem - Memoized individual feed message.\r\n *\r\n * Competency: React Performance Analysis\r\n * Bug surface: incorrect React.memo, stale props\r\n */\r\n\r\nimport React, { memo } from 'react';\r\n\r\nconst severityColors = {\r\n  low: { bg: '#f0fdf4', border: '#bbf7d0', text: '#166534' },\r\n  medium: { bg: '#eff6ff', border: '#bfdbfe', text: '#1e40af' },\r\n  high: { bg: '#fff7ed', border: '#fed7aa', text: '#9a3412' },\r\n  critical: { bg: '#fef2f2', border: '#fecaca', text: '#991b1b' },\r\n};\r\n\r\nconst typeIcons = {\r\n  alert: 'üîî',\r\n  notification: 'üì¢',\r\n  update: 'üîÑ',\r\n  warning: '‚ö†Ô∏è',\r\n  info: '‚ÑπÔ∏è',\r\n};\r\n\r\nconst FeedItem = memo(function FeedItem({ item }) {\r\n  const colors = severityColors[item.severity] || severityColors.low;\r\n  const icon = typeIcons[item.type] || 'üìå';\r\n  const time = new Date(item.timestamp).toLocaleTimeString();\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '12px 16px',\r\n      borderBottom: '1px solid #f3f4f6',\r\n      backgroundColor: colors.bg,\r\n      display: 'flex',\r\n      gap: '10px',\r\n      alignItems: 'flex-start',\r\n    }}>\r\n      <span style={{ fontSize: '16px', flexShrink: 0 }}>{icon}</span>\r\n      <div style={{ flex: 1, minWidth: 0 }}>\r\n        <div style={{ fontSize: '14px', color: '#1f2937', marginBottom: '4px' }}>\r\n          {item.message}\r\n        </div>\r\n        <div style={{ display: 'flex', gap: '12px', fontSize: '11px', color: '#6b7280' }}>\r\n          <span>{time}</span>\r\n          <span style={{\r\n            padding: '1px 6px',\r\n            borderRadius: '10px',\r\n            backgroundColor: colors.border,\r\n            color: colors.text,\r\n            fontWeight: '500',\r\n          }}>\r\n            {item.severity}\r\n          </span>\r\n          <span>{item.source}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport { FeedItem };\r\n","/**\r\n * FeedFilter - Filter controls for the live feed with debounced updates.\r\n *\r\n * Competency: React Hook Dependencies\r\n * Bug surface: callback dependencies, stale closure\r\n */\r\n\r\nimport React, { memo, useCallback } from 'react';\r\n\r\nconst FeedFilter = memo(function FeedFilter({ filter, onChange }) {\r\n  const handleTypeChange = useCallback(\r\n    (e) => {\r\n      onChange({ ...filter, type: e.target.value });\r\n    },\r\n    [filter, onChange]\r\n  );\r\n\r\n  const handleSeverityChange = useCallback(\r\n    (e) => {\r\n      onChange({ ...filter, severity: e.target.value });\r\n    },\r\n    [filter, onChange]\r\n  );\r\n\r\n  return (\r\n    <div style={{\r\n      display: 'flex',\r\n      gap: '12px',\r\n      marginBottom: '12px',\r\n      padding: '10px',\r\n      backgroundColor: 'white',\r\n      borderRadius: '6px',\r\n      border: '1px solid #e5e7eb',\r\n    }}>\r\n      <div>\r\n        <label style={{ fontSize: '12px', color: '#6b7280', display: 'block', marginBottom: '4px' }}>\r\n          Type\r\n        </label>\r\n        <select value={filter.type} onChange={handleTypeChange} style={selectStyle}>\r\n          <option value=\"all\">All Types</option>\r\n          <option value=\"alert\">Alert</option>\r\n          <option value=\"notification\">Notification</option>\r\n          <option value=\"update\">Update</option>\r\n          <option value=\"warning\">Warning</option>\r\n          <option value=\"info\">Info</option>\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label style={{ fontSize: '12px', color: '#6b7280', display: 'block', marginBottom: '4px' }}>\r\n          Severity\r\n        </label>\r\n        <select value={filter.severity} onChange={handleSeverityChange} style={selectStyle}>\r\n          <option value=\"all\">All Severities</option>\r\n          <option value=\"low\">Low</option>\r\n          <option value=\"medium\">Medium</option>\r\n          <option value=\"high\">High</option>\r\n          <option value=\"critical\">Critical</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst selectStyle = {\r\n  padding: '6px 10px',\r\n  border: '1px solid #d1d5db',\r\n  borderRadius: '4px',\r\n  fontSize: '13px',\r\n  backgroundColor: 'white',\r\n  color: '#374151',\r\n};\r\n\r\nexport { FeedFilter };\r\n","/**\r\n * MessageComposer - Send messages via WebSocket.\r\n *\r\n * Competency: WebSocket Real-time Communication\r\n * Bug surface: connection state race condition, serialization errors\r\n */\r\n\r\nimport React, { useState, useCallback, memo } from 'react';\r\nimport { useWebSocketContext } from '../../context/WebSocketContext';\r\n\r\nconst MessageComposer = memo(function MessageComposer() {\r\n  const { send, connected, authenticated } = useWebSocketContext();\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleSend = useCallback(() => {\r\n    if (!message.trim()) return;\r\n    send('feed:send', { message: message.trim() });\r\n    setMessage('');\r\n  }, [message, send]);\r\n\r\n  const handleKeyDown = useCallback(\r\n    (e) => {\r\n      if (e.key === 'Enter' && !e.shiftKey) {\r\n        e.preventDefault();\r\n        handleSend();\r\n      }\r\n    },\r\n    [handleSend]\r\n  );\r\n\r\n  const canSend = connected && authenticated && message.trim();\r\n\r\n  return (\r\n    <div style={{\r\n      display: 'flex',\r\n      gap: '8px',\r\n      marginTop: '12px',\r\n      padding: '12px',\r\n      backgroundColor: 'white',\r\n      borderRadius: '8px',\r\n      border: '1px solid #e5e7eb',\r\n    }}>\r\n      <input\r\n        type=\"text\"\r\n        value={message}\r\n        onChange={(e) => setMessage(e.target.value)}\r\n        onKeyDown={handleKeyDown}\r\n        placeholder={connected ? 'Type a message...' : 'Connect to send messages'}\r\n        disabled={!connected || !authenticated}\r\n        style={{\r\n          flex: 1,\r\n          padding: '8px 12px',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '6px',\r\n          fontSize: '14px',\r\n          outline: 'none',\r\n        }}\r\n      />\r\n      <button\r\n        onClick={handleSend}\r\n        disabled={!canSend}\r\n        style={{\r\n          padding: '8px 20px',\r\n          backgroundColor: canSend ? '#3b82f6' : '#d1d5db',\r\n          color: 'white',\r\n          border: 'none',\r\n          borderRadius: '6px',\r\n          cursor: canSend ? 'pointer' : 'not-allowed',\r\n          fontSize: '13px',\r\n          fontWeight: '500',\r\n        }}\r\n      >\r\n        Send\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport { MessageComposer };\r\n","/**\r\n * LiveFeed - Real-time WebSocket feed consumer with message ordering and stats.\r\n *\r\n * Competency: WebSocket Real-time Communication, React Hook Dependencies\r\n * Bug surface: message ordering, duplicate handling, connection state race condition,\r\n *              message queue overflow, memory leaks, heartbeat monitoring,\r\n *              reconnection handling, stale closure in event handlers\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback, useRef, memo } from 'react';\r\nimport { useWebSocketContext } from '../../context/WebSocketContext';\r\nimport { FeedItem } from './FeedItem';\r\nimport { FeedFilter } from './FeedFilter';\r\nimport { MessageComposer } from './MessageComposer';\r\n\r\nconst MAX_FEED_ITEMS = 100;\r\n\r\nconst LiveFeed = memo(function LiveFeed() {\r\n  const { subscribe, send, connected, authenticated, reconnecting, reconnectAttempt, getState } = useWebSocketContext();\r\n  const [feedItems, setFeedItems] = useState([]);\r\n  const [filter, setFilter] = useState({ type: 'all', severity: 'all' });\r\n  const seenIdsRef = useRef(new Set());\r\n  const feedContainerRef = useRef(null);\r\n  const [autoScroll, setAutoScroll] = useState(true);\r\n  const [wsStats, setWsStats] = useState(null);\r\n  const [messageSequence, setMessageSequence] = useState(0);\r\n  const [outOfOrderCount, setOutOfOrderCount] = useState(0);\r\n  const lastSequenceRef = useRef(-1);\r\n\r\n  // Subscribe to feed messages with sequence tracking\r\n  useEffect(() => {\r\n    const unsubscribe = subscribe('feed:message', (payload) => {\r\n      // Deduplicate messages\r\n      if (seenIdsRef.current.has(payload.id)) {\r\n        return;\r\n      }\r\n      seenIdsRef.current.add(payload.id);\r\n\r\n      // Track message ordering via sequence numbers\r\n      setMessageSequence((prev) => {\r\n        const newSeq = prev + 1;\r\n        if (payload.sequence !== undefined && payload.sequence <= lastSequenceRef.current) {\r\n          setOutOfOrderCount((c) => c + 1);\r\n        }\r\n        if (payload.sequence !== undefined) {\r\n          lastSequenceRef.current = payload.sequence;\r\n        }\r\n        return newSeq;\r\n      });\r\n\r\n      // Limit seen IDs set size\r\n      if (seenIdsRef.current.size > MAX_FEED_ITEMS * 2) {\r\n        const idsArray = Array.from(seenIdsRef.current);\r\n        seenIdsRef.current = new Set(idsArray.slice(-MAX_FEED_ITEMS));\r\n      }\r\n\r\n      setFeedItems((prev) => {\r\n        const updated = [...prev, { ...payload, receivedAt: Date.now() }];\r\n        return updated.length > MAX_FEED_ITEMS ? updated.slice(-MAX_FEED_ITEMS) : updated;\r\n      });\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [subscribe]);\r\n\r\n  // Subscribe to heartbeat events\r\n  useEffect(() => {\r\n    const unsubMissed = subscribe('heartbeat:missed', (payload) => {\r\n      console.warn('[LiveFeed] Heartbeat missed:', payload);\r\n    });\r\n\r\n    const unsubDead = subscribe('heartbeat:dead', () => {\r\n      console.error('[LiveFeed] Connection dead - heartbeat timeout');\r\n    });\r\n\r\n    return () => {\r\n      unsubMissed();\r\n      unsubDead();\r\n    };\r\n  }, [subscribe]);\r\n\r\n  // Poll WebSocket stats for display\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      const state = getState();\r\n      if (state) {\r\n        setWsStats(state);\r\n      }\r\n    }, 2000);\r\n    return () => clearInterval(interval);\r\n  }, [getState]);\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    if (autoScroll && feedContainerRef.current) {\r\n      feedContainerRef.current.scrollTop = feedContainerRef.current.scrollHeight;\r\n    }\r\n  }, [feedItems.length, autoScroll]);\r\n\r\n  // Detect manual scroll to pause auto-scroll\r\n  const handleScroll = useCallback(() => {\r\n    const el = feedContainerRef.current;\r\n    if (!el) return;\r\n    const isAtBottom = el.scrollHeight - el.scrollTop - el.clientHeight < 50;\r\n    setAutoScroll(isAtBottom);\r\n  }, []);\r\n\r\n  const handleFilterChange = useCallback((newFilter) => {\r\n    setFilter(newFilter);\r\n  }, []);\r\n\r\n  const clearFeed = useCallback(() => {\r\n    setFeedItems([]);\r\n    seenIdsRef.current.clear();\r\n    setMessageSequence(0);\r\n    setOutOfOrderCount(0);\r\n    lastSequenceRef.current = -1;\r\n  }, []);\r\n\r\n  // Apply filters\r\n  const filteredItems = feedItems.filter((item) => {\r\n    if (filter.type !== 'all' && item.type !== filter.type) return false;\r\n    if (filter.severity !== 'all' && item.severity !== filter.severity) return false;\r\n    return true;\r\n  });\r\n\r\n  return (\r\n    <div style={{ padding: '20px', display: 'flex', flexDirection: 'column', height: 'calc(100vh - 120px)' }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n        <h2 style={{ margin: 0, fontSize: '24px', color: '#111827' }}>Live Feed</h2>\r\n        <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n          <span style={{ fontSize: '12px', color: '#6b7280' }}>\r\n            {filteredItems.length} messages\r\n          </span>\r\n          <button onClick={clearFeed} style={clearBtnStyle}>\r\n            Clear\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Connection Stats Panel */}\r\n      <ConnectionStatsPanel\r\n        connected={connected}\r\n        authenticated={authenticated}\r\n        reconnecting={reconnecting}\r\n        reconnectAttempt={reconnectAttempt}\r\n        wsStats={wsStats}\r\n        messageSequence={messageSequence}\r\n        outOfOrderCount={outOfOrderCount}\r\n      />\r\n\r\n      <FeedFilter filter={filter} onChange={handleFilterChange} />\r\n\r\n      {!connected && (\r\n        <div style={{\r\n          padding: '12px',\r\n          backgroundColor: '#fef3c7',\r\n          border: '1px solid #fde68a',\r\n          borderRadius: '6px',\r\n          marginBottom: '12px',\r\n          fontSize: '13px',\r\n          color: '#92400e',\r\n        }}>\r\n          {reconnecting\r\n            ? `Reconnecting... (attempt ${reconnectAttempt})`\r\n            : 'WebSocket disconnected. Messages will resume when connection is restored.'}\r\n        </div>\r\n      )}\r\n\r\n      <div\r\n        ref={feedContainerRef}\r\n        onScroll={handleScroll}\r\n        style={{\r\n          flex: 1,\r\n          overflowY: 'auto',\r\n          border: '1px solid #e5e7eb',\r\n          borderRadius: '8px',\r\n          backgroundColor: '#fafafa',\r\n        }}\r\n      >\r\n        {filteredItems.length === 0 ? (\r\n          <div style={{ padding: '40px', textAlign: 'center', color: '#9ca3af' }}>\r\n            {connected && authenticated\r\n              ? 'Waiting for messages...'\r\n              : 'Connect to see live messages'}\r\n          </div>\r\n        ) : (\r\n          filteredItems.map((item) => (\r\n            <FeedItem key={item.id} item={item} />\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {!autoScroll && (\r\n        <button\r\n          onClick={() => setAutoScroll(true)}\r\n          style={{\r\n            position: 'relative',\r\n            bottom: '50px',\r\n            alignSelf: 'center',\r\n            padding: '6px 16px',\r\n            backgroundColor: '#3b82f6',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '20px',\r\n            cursor: 'pointer',\r\n            fontSize: '12px',\r\n            boxShadow: '0 2px 8px rgba(59, 130, 246, 0.4)',\r\n          }}\r\n        >\r\n          Scroll to latest\r\n        </button>\r\n      )}\r\n\r\n      <MessageComposer />\r\n    </div>\r\n  );\r\n});\r\n\r\n/**\r\n * Connection stats panel - displays WebSocket health metrics.\r\n * Bug surface: stale state, missing updates, heartbeat display\r\n */\r\nconst ConnectionStatsPanel = memo(function ConnectionStatsPanel({\r\n  connected,\r\n  authenticated,\r\n  reconnecting,\r\n  reconnectAttempt,\r\n  wsStats,\r\n  messageSequence,\r\n  outOfOrderCount,\r\n}) {\r\n  const heartbeatAge = wsStats?.lastHeartbeatAt\r\n    ? Math.round((Date.now() - wsStats.lastHeartbeatAt) / 1000)\r\n    : null;\r\n\r\n  return (\r\n    <div style={{\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(auto-fill, minmax(130px, 1fr))',\r\n      gap: '8px',\r\n      marginBottom: '12px',\r\n    }}>\r\n      <StatBadge\r\n        label=\"Connection\"\r\n        value={connected ? 'Connected' : reconnecting ? 'Reconnecting' : 'Disconnected'}\r\n        color={connected ? '#059669' : reconnecting ? '#d97706' : '#dc2626'}\r\n      />\r\n      <StatBadge\r\n        label=\"Auth\"\r\n        value={authenticated ? 'Authenticated' : 'Not Auth'}\r\n        color={authenticated ? '#059669' : '#6b7280'}\r\n      />\r\n      <StatBadge\r\n        label=\"Messages\"\r\n        value={messageSequence}\r\n        color=\"#3b82f6\"\r\n      />\r\n      <StatBadge\r\n        label=\"Out of Order\"\r\n        value={outOfOrderCount}\r\n        color={outOfOrderCount > 0 ? '#dc2626' : '#059669'}\r\n      />\r\n      <StatBadge\r\n        label=\"Queued\"\r\n        value={wsStats?.queuedMessages ?? 0}\r\n        color=\"#6b7280\"\r\n      />\r\n      <StatBadge\r\n        label=\"Heartbeat\"\r\n        value={heartbeatAge !== null ? `${heartbeatAge}s ago` : 'N/A'}\r\n        color={heartbeatAge !== null && heartbeatAge > 60 ? '#dc2626' : '#059669'}\r\n      />\r\n      <StatBadge\r\n        label=\"HB Misses\"\r\n        value={wsStats?.heartbeatMissCount ?? 0}\r\n        color={wsStats?.heartbeatMissCount > 0 ? '#f59e0b' : '#059669'}\r\n      />\r\n      {reconnecting && (\r\n        <StatBadge\r\n          label=\"Reconnect #\"\r\n          value={reconnectAttempt}\r\n          color=\"#d97706\"\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst StatBadge = memo(function StatBadge({ label, value, color }) {\r\n  return (\r\n    <div style={{\r\n      padding: '8px 10px',\r\n      backgroundColor: '#f9fafb',\r\n      borderRadius: '6px',\r\n      border: '1px solid #e5e7eb',\r\n    }}>\r\n      <div style={{ fontSize: '10px', color: '#6b7280', marginBottom: '2px' }}>{label}</div>\r\n      <div style={{ fontSize: '14px', fontWeight: '600', color }}>{String(value)}</div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst clearBtnStyle = {\r\n  padding: '6px 12px',\r\n  border: '1px solid #d1d5db',\r\n  borderRadius: '4px',\r\n  backgroundColor: 'white',\r\n  cursor: 'pointer',\r\n  fontSize: '12px',\r\n  color: '#374151',\r\n};\r\n\r\nexport { LiveFeed };\r\n","/**\r\n * LiveFeedPage - Lazy loaded route page for the live feed.\r\n *\r\n * Competency: Bundle Optimization, WebSocket Real-time Communication\r\n */\r\n\r\nimport React from 'react';\r\nimport { LiveFeed } from '../components/feed/LiveFeed';\r\n\r\nfunction LiveFeedPage() {\r\n  return <LiveFeed />;\r\n}\r\n\r\nexport default LiveFeedPage;\r\n"],"names":["severityColors","typeIcons","FeedItem","memo","item","colors","icon","time","jsxs","jsx","FeedFilter","filter","onChange","handleTypeChange","useCallback","e","handleSeverityChange","selectStyle","MessageComposer","send","connected","authenticated","useWebSocketContext","message","setMessage","useState","handleSend","handleKeyDown","canSend","MAX_FEED_ITEMS","LiveFeed","subscribe","reconnecting","reconnectAttempt","getState","feedItems","setFeedItems","setFilter","seenIdsRef","useRef","feedContainerRef","autoScroll","setAutoScroll","wsStats","setWsStats","messageSequence","setMessageSequence","outOfOrderCount","setOutOfOrderCount","lastSequenceRef","useEffect","payload","prev","newSeq","c","idsArray","updated","unsubMissed","unsubDead","interval","state","handleScroll","el","isAtBottom","handleFilterChange","newFilter","clearFeed","filteredItems","clearBtnStyle","ConnectionStatsPanel","heartbeatAge","StatBadge","label","value","color","LiveFeedPage"],"mappings":"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"}