{"version":3,"file":"AnalyticsPage-CpLnoW0F.js","sources":["../../src/components/analytics/AnalyticsChart.jsx","../../src/services/eventLoop/profiler.js","../../src/components/analytics/EventLoopDashboard.jsx","../../src/components/analytics/TimerPlayground.jsx","../../src/services/eventLoop/TaskScheduler.js","../../src/components/analytics/HeavyComputation.jsx","../../src/pages/AnalyticsPage.jsx"],"sourcesContent":["/**\r\n * AnalyticsChart - Renders analytics time-series data with Suspense.\r\n *\r\n * Competency: React Suspense for Data Fetching, React Performance Analysis,\r\n *             React Suspense Implementation\r\n * Bug surface: suspense data fetching, performance issues, heavy rendering,\r\n *              incorrect data fetching, stale data, not updating on change,\r\n *              suspense cache invalidation, createResource pattern\r\n */\r\n\r\nimport React, { memo, useMemo, useState, useCallback } from 'react';\r\nimport { get } from '../../api/client';\r\nimport { SuspenseBoundary } from '../common/SuspenseBoundary';\r\nimport { SkeletonDashboard } from '../common/SuspenseFallback';\r\n\r\n// ── Module-level Suspense cache ──\r\n// Uses apiClient (retry, dedup, rate limiting) inside the throw-promise pattern\r\n// Bug surface: cache invalidation - stale data if not cleared properly\r\nlet analyticsEntry = null;\r\n\r\nfunction readAnalytics() {\r\n  if (analyticsEntry && analyticsEntry.data) return analyticsEntry.data;\r\n  if (analyticsEntry && analyticsEntry.error) throw analyticsEntry.error; // ErrorBoundary catches once\r\n  if (analyticsEntry && analyticsEntry.promise) throw analyticsEntry.promise;\r\n\r\n  analyticsEntry = { data: null, error: null, promise: null };\r\n  analyticsEntry.promise = get('/analytics')\r\n    .then((d) => { analyticsEntry.data = d; })\r\n    .catch((e) => { analyticsEntry.error = e; }); // Store error, don't reset cache\r\n  throw analyticsEntry.promise;\r\n}\r\n\r\n// Invalidate the Suspense cache (forces re-fetch on next read)\r\nfunction invalidateAnalyticsCache() {\r\n  analyticsEntry = null;\r\n}\r\n\r\n/**\r\n * AnalyticsChartWrapper - Provides refresh capability around the Suspense boundary.\r\n * Bug surface: suspense cache invalidation, boundary placement\r\n */\r\nconst AnalyticsChartWrapper = memo(function AnalyticsChartWrapper() {\r\n  const [refreshKey, setRefreshKey] = useState(0);\r\n\r\n  const handleRefresh = useCallback(() => {\r\n    invalidateAnalyticsCache();\r\n    setRefreshKey((k) => k + 1);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>\r\n        <h3 style={{ margin: 0, fontSize: '18px', color: '#111827' }}>Analytics Overview</h3>\r\n        <button onClick={handleRefresh} style={{\r\n          padding: '6px 14px',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '6px',\r\n          backgroundColor: 'white',\r\n          cursor: 'pointer',\r\n          fontSize: '13px',\r\n          color: '#374151',\r\n        }}>\r\n          Refresh Data\r\n        </button>\r\n      </div>\r\n      <SuspenseBoundary\r\n        suspenseKey={`analytics-${refreshKey}`}\r\n        fallback={<SkeletonDashboard />}\r\n        level=\"section\"\r\n      >\r\n        <AnalyticsChart />\r\n      </SuspenseBoundary>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst AnalyticsChart = memo(function AnalyticsChart() {\r\n  const response = readAnalytics();\r\n  const { summary, timeSeries } = response.data;\r\n\r\n  // Memoize computed chart data\r\n  const chartBars = useMemo(() => {\r\n    if (!timeSeries) return [];\r\n    const maxRequests = Math.max(...timeSeries.map((d) => d.requests));\r\n    return timeSeries.map((point) => ({\r\n      ...point,\r\n      heightPercent: maxRequests > 0 ? (point.requests / maxRequests) * 100 : 0,\r\n      hour: new Date(point.timestamp).getHours(),\r\n    }));\r\n  }, [timeSeries]);\r\n\r\n  return (\r\n    <div>\r\n      {/* Summary Cards */}\r\n      <div style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))',\r\n        gap: '12px',\r\n        marginBottom: '24px',\r\n      }}>\r\n        <SummaryCard label=\"Total Users\" value={summary.totalUsers.toLocaleString()} />\r\n        <SummaryCard label=\"Active Today\" value={summary.activeToday.toLocaleString()} />\r\n        <SummaryCard label=\"Total Requests\" value={summary.totalRequests.toLocaleString()} />\r\n        <SummaryCard label=\"Avg Response\" value={`${summary.avgResponseTime}ms`} />\r\n        <SummaryCard label=\"Uptime\" value={`${summary.uptime}%`} />\r\n        <SummaryCard label=\"Error Rate\" value={`${summary.errorRate}%`} />\r\n      </div>\r\n\r\n      {/* Simple Bar Chart */}\r\n      <div style={{\r\n        padding: '20px',\r\n        backgroundColor: 'white',\r\n        borderRadius: '12px',\r\n        border: '1px solid #e5e7eb',\r\n      }}>\r\n        <h4 style={{ margin: '0 0 16px 0', fontSize: '15px', color: '#374151' }}>\r\n          Requests (24h)\r\n        </h4>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'flex-end',\r\n          gap: '3px',\r\n          height: '150px',\r\n          padding: '0 10px',\r\n        }}>\r\n          {chartBars.map((bar, i) => (\r\n            <div\r\n              key={i}\r\n              style={{\r\n                flex: 1,\r\n                height: `${bar.heightPercent}%`,\r\n                backgroundColor: '#3b82f6',\r\n                borderRadius: '2px 2px 0 0',\r\n                minHeight: '2px',\r\n                transition: 'height 0.2s ease',\r\n                position: 'relative',\r\n              }}\r\n              title={`${bar.hour}:00 - ${bar.requests.toLocaleString()} requests`}\r\n            />\r\n          ))}\r\n        </div>\r\n        <div style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          marginTop: '6px',\r\n          fontSize: '10px',\r\n          color: '#9ca3af',\r\n          padding: '0 10px',\r\n        }}>\r\n          <span>0h</span>\r\n          <span>6h</span>\r\n          <span>12h</span>\r\n          <span>18h</span>\r\n          <span>24h</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst SummaryCard = memo(function SummaryCard({ label, value }) {\r\n  return (\r\n    <div style={{\r\n      padding: '14px',\r\n      backgroundColor: 'white',\r\n      borderRadius: '8px',\r\n      border: '1px solid #e5e7eb',\r\n    }}>\r\n      <div style={{ fontSize: '11px', color: '#6b7280', marginBottom: '4px' }}>{label}</div>\r\n      <div style={{ fontSize: '20px', fontWeight: '600', color: '#111827' }}>{value}</div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport { AnalyticsChart, AnalyticsChartWrapper, invalidateAnalyticsCache };\r\n","/**\r\n * Event Loop Profiler - Measures timing across different event loop phases.\r\n *\r\n * Competencies: Event Loop Optimization, Event Loop Understanding\r\n * Bug surface: phase skipping, tick misunderstanding, timer delays,\r\n *              nextTick abuse, callback ordering, recursive blocking\r\n */\r\n\r\nclass EventLoopProfiler {\r\n  constructor() {\r\n    this.measurements = [];\r\n    this.maxMeasurements = 500;\r\n    this.isProfileActive = false;\r\n    this.profileSession = null;\r\n  }\r\n\r\n  /**\r\n   * Measure the timing of different async scheduling mechanisms.\r\n   * Demonstrates the correct ordering of event loop phases.\r\n   */\r\n  async measurePhases() {\r\n    const results = {\r\n      startTime: performance.now(),\r\n      phases: [],\r\n    };\r\n\r\n    return new Promise((resolve) => {\r\n      const order = [];\r\n\r\n      // 1. Microtask (Promise.then / queueMicrotask) - runs first\r\n      queueMicrotask(() => {\r\n        order.push({\r\n          phase: 'microtask',\r\n          time: performance.now() - results.startTime,\r\n          mechanism: 'queueMicrotask',\r\n        });\r\n      });\r\n\r\n      // 2. Promise resolution - also microtask\r\n      Promise.resolve().then(() => {\r\n        order.push({\r\n          phase: 'microtask',\r\n          time: performance.now() - results.startTime,\r\n          mechanism: 'Promise.resolve().then',\r\n        });\r\n      });\r\n\r\n      // 3. setTimeout(0) - macrotask, runs after all microtasks\r\n      setTimeout(() => {\r\n        order.push({\r\n          phase: 'macrotask',\r\n          time: performance.now() - results.startTime,\r\n          mechanism: 'setTimeout(0)',\r\n        });\r\n\r\n        // 4. requestAnimationFrame - runs before next paint\r\n        requestAnimationFrame((timestamp) => {\r\n          order.push({\r\n            phase: 'animation',\r\n            time: performance.now() - results.startTime,\r\n            mechanism: 'requestAnimationFrame',\r\n            frameTimestamp: timestamp,\r\n          });\r\n\r\n          // 5. requestIdleCallback - runs when browser is idle\r\n          if (typeof requestIdleCallback !== 'undefined') {\r\n            requestIdleCallback((deadline) => {\r\n              order.push({\r\n                phase: 'idle',\r\n                time: performance.now() - results.startTime,\r\n                mechanism: 'requestIdleCallback',\r\n                timeRemaining: deadline.timeRemaining(),\r\n              });\r\n\r\n              results.phases = order;\r\n              results.endTime = performance.now();\r\n              results.totalDuration = results.endTime - results.startTime;\r\n              resolve(results);\r\n            });\r\n          } else {\r\n            results.phases = order;\r\n            results.endTime = performance.now();\r\n            results.totalDuration = results.endTime - results.startTime;\r\n            resolve(results);\r\n          }\r\n        });\r\n      }, 0);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Measure the cost of blocking the event loop for a given duration.\r\n   * Used to demonstrate why long synchronous tasks are harmful.\r\n   */\r\n  measureBlockingImpact(blockDurationMs = 50) {\r\n    return new Promise((resolve) => {\r\n      const metrics = {\r\n        blockDuration: blockDurationMs,\r\n        beforeBlock: performance.now(),\r\n        rAFDelay: null,\r\n        timeoutDelay: null,\r\n        microtaskDelay: null,\r\n      };\r\n\r\n      // Schedule observers before blocking\r\n      const timeoutStart = performance.now();\r\n      setTimeout(() => {\r\n        metrics.timeoutDelay = performance.now() - timeoutStart;\r\n      }, 0);\r\n\r\n      const rAFStart = performance.now();\r\n      requestAnimationFrame(() => {\r\n        metrics.rAFDelay = performance.now() - rAFStart;\r\n      });\r\n\r\n      const microtaskStart = performance.now();\r\n      queueMicrotask(() => {\r\n        metrics.microtaskDelay = performance.now() - microtaskStart;\r\n      });\r\n\r\n      // Block the event loop\r\n      const blockEnd = performance.now() + blockDurationMs;\r\n      while (performance.now() < blockEnd) {\r\n        // Intentional blocking for measurement\r\n      }\r\n\r\n      metrics.afterBlock = performance.now();\r\n      metrics.actualBlockTime = metrics.afterBlock - metrics.beforeBlock;\r\n\r\n      // Wait for all callbacks to fire\r\n      setTimeout(() => {\r\n        resolve(metrics);\r\n      }, 100);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Start continuous profiling session.\r\n   */\r\n  startProfiling(intervalMs = 500) {\r\n    if (this.isProfileActive) return;\r\n    this.isProfileActive = true;\r\n\r\n    this.profileSession = {\r\n      startedAt: Date.now(),\r\n      samples: [],\r\n    };\r\n\r\n    const sample = () => {\r\n      if (!this.isProfileActive) return;\r\n\r\n      const start = performance.now();\r\n\r\n      setTimeout(() => {\r\n        const lag = performance.now() - start;\r\n        const entry = {\r\n          timestamp: Date.now(),\r\n          eventLoopLag: Math.round(lag * 100) / 100,\r\n        };\r\n\r\n        this.profileSession.samples.push(entry);\r\n\r\n        if (this.profileSession.samples.length > this.maxMeasurements) {\r\n          this.profileSession.samples.shift();\r\n        }\r\n\r\n        if (this.isProfileActive) {\r\n          setTimeout(sample, intervalMs);\r\n        }\r\n      }, 0);\r\n    };\r\n\r\n    sample();\r\n  }\r\n\r\n  /**\r\n   * Stop profiling and return results.\r\n   */\r\n  stopProfiling() {\r\n    this.isProfileActive = false;\r\n    const session = this.profileSession;\r\n    this.profileSession = null;\r\n\r\n    if (!session) return null;\r\n\r\n    const samples = session.samples;\r\n    const lags = samples.map((s) => s.eventLoopLag);\r\n\r\n    return {\r\n      duration: Date.now() - session.startedAt,\r\n      sampleCount: samples.length,\r\n      avgLag: lags.length > 0 ? lags.reduce((a, b) => a + b, 0) / lags.length : 0,\r\n      maxLag: lags.length > 0 ? Math.max(...lags) : 0,\r\n      minLag: lags.length > 0 ? Math.min(...lags) : 0,\r\n      p95Lag: this._percentile(lags, 95),\r\n      p99Lag: this._percentile(lags, 99),\r\n      samples,\r\n    };\r\n  }\r\n\r\n  _percentile(arr, p) {\r\n    if (arr.length === 0) return 0;\r\n    const sorted = [...arr].sort((a, b) => a - b);\r\n    const index = Math.ceil((p / 100) * sorted.length) - 1;\r\n    return sorted[index];\r\n  }\r\n}\r\n\r\nexport { EventLoopProfiler };\r\n","/**\r\n * EventLoopDashboard - Visualizes event loop health and phase timings.\r\n *\r\n * Competency: Event Loop Optimization, Event Loop Understanding\r\n * Bug surface: event loop monitoring, lag detection, stall detection,\r\n *              phase confusion, timer delays\r\n */\r\n\r\nimport React, { useState, useCallback, memo } from 'react';\r\nimport { useEventLoopHealth } from '../../hooks/useEventLoopHealth';\r\nimport { EventLoopProfiler } from '../../services/eventLoop/profiler';\r\n\r\nconst profiler = new EventLoopProfiler();\r\n\r\nconst EventLoopDashboard = memo(function EventLoopDashboard() {\r\n  const health = useEventLoopHealth({ enabled: true, sampleInterval: 200 });\r\n  const [phaseResults, setPhaseResults] = useState(null);\r\n  const [blockingResults, setBlockingResults] = useState(null);\r\n  const [isMeasuring, setIsMeasuring] = useState(false);\r\n\r\n  const measurePhases = useCallback(async () => {\r\n    setIsMeasuring(true);\r\n    try {\r\n      const results = await profiler.measurePhases();\r\n      setPhaseResults(results);\r\n    } catch (err) {\r\n      console.error('Phase measurement failed:', err);\r\n    }\r\n    setIsMeasuring(false);\r\n  }, []);\r\n\r\n  const measureBlocking = useCallback(async () => {\r\n    setIsMeasuring(true);\r\n    try {\r\n      const results = await profiler.measureBlockingImpact(100);\r\n      setBlockingResults(results);\r\n    } catch (err) {\r\n      console.error('Blocking measurement failed:', err);\r\n    }\r\n    setIsMeasuring(false);\r\n  }, []);\r\n\r\n  const getHealthColor = (score) => {\r\n    if (score >= 80) return '#10b981';\r\n    if (score >= 60) return '#f59e0b';\r\n    if (score >= 40) return '#f97316';\r\n    return '#ef4444';\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      backgroundColor: 'white',\r\n      borderRadius: '12px',\r\n      border: '1px solid #e5e7eb',\r\n    }}>\r\n      <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', color: '#111827' }}>\r\n        Event Loop Health\r\n      </h3>\r\n\r\n      {/* Health Score */}\r\n      <div style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(auto-fill, minmax(120px, 1fr))',\r\n        gap: '12px',\r\n        marginBottom: '20px',\r\n      }}>\r\n        <HealthMetric\r\n          label=\"Score\"\r\n          value={`${health.score}/100`}\r\n          color={getHealthColor(health.score)}\r\n        />\r\n        <HealthMetric\r\n          label=\"Current Lag\"\r\n          value={`${health.currentLag}ms`}\r\n          color={health.currentLag > 50 ? '#ef4444' : '#10b981'}\r\n        />\r\n        <HealthMetric\r\n          label=\"Avg Lag\"\r\n          value={`${health.avgLag}ms`}\r\n          color={health.avgLag > 16 ? '#f59e0b' : '#10b981'}\r\n        />\r\n        <HealthMetric\r\n          label=\"Max Lag\"\r\n          value={`${health.maxLag}ms`}\r\n          color={health.maxLag > 100 ? '#ef4444' : '#10b981'}\r\n        />\r\n        <HealthMetric label=\"Lag Spikes\" value={health.lagSpikes} color=\"#6b7280\" />\r\n        <HealthMetric label=\"Stalls\" value={health.stalls} color={health.stalls > 0 ? '#ef4444' : '#6b7280'} />\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div style={{ display: 'flex', gap: '8px', marginBottom: '16px' }}>\r\n        <button onClick={measurePhases} disabled={isMeasuring} style={actionBtnStyle}>\r\n          Measure Phases\r\n        </button>\r\n        <button onClick={measureBlocking} disabled={isMeasuring} style={actionBtnStyle}>\r\n          Test Blocking Impact\r\n        </button>\r\n        <button onClick={health.reset} style={actionBtnStyle}>\r\n          Reset Stats\r\n        </button>\r\n      </div>\r\n\r\n      {/* Phase Results */}\r\n      {phaseResults && (\r\n        <div style={{ marginBottom: '16px' }}>\r\n          <h4 style={{ fontSize: '14px', color: '#374151', marginBottom: '8px' }}>\r\n            Event Loop Phase Order (total: {phaseResults.totalDuration?.toFixed(1)}ms)\r\n          </h4>\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\r\n            {phaseResults.phases.map((phase, i) => (\r\n              <div key={i} style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                padding: '6px 10px',\r\n                backgroundColor: '#f9fafb',\r\n                borderRadius: '4px',\r\n                fontSize: '13px',\r\n              }}>\r\n                <span>\r\n                  <strong style={{ color: '#374151' }}>{i + 1}.</strong>{' '}\r\n                  <span style={{ color: '#6b7280' }}>{phase.mechanism}</span>\r\n                </span>\r\n                <span style={{ color: '#3b82f6', fontFamily: 'monospace' }}>\r\n                  {phase.time.toFixed(2)}ms\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Blocking Results */}\r\n      {blockingResults && (\r\n        <div>\r\n          <h4 style={{ fontSize: '14px', color: '#374151', marginBottom: '8px' }}>\r\n            Blocking Impact (blocked for {blockingResults.actualBlockTime?.toFixed(1)}ms)\r\n          </h4>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '8px' }}>\r\n            <BlockingMetric\r\n              label=\"setTimeout delay\"\r\n              value={`${blockingResults.timeoutDelay?.toFixed(1) || '?'}ms`}\r\n            />\r\n            <BlockingMetric\r\n              label=\"rAF delay\"\r\n              value={`${blockingResults.rAFDelay?.toFixed(1) || '?'}ms`}\r\n            />\r\n            <BlockingMetric\r\n              label=\"Microtask delay\"\r\n              value={`${blockingResults.microtaskDelay?.toFixed(1) || '?'}ms`}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst HealthMetric = memo(function HealthMetric({ label, value, color }) {\r\n  return (\r\n    <div style={{ padding: '10px', backgroundColor: '#f9fafb', borderRadius: '8px' }}>\r\n      <div style={{ fontSize: '11px', color: '#6b7280', marginBottom: '2px' }}>{label}</div>\r\n      <div style={{ fontSize: '18px', fontWeight: '600', color }}>{value}</div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst BlockingMetric = memo(function BlockingMetric({ label, value }) {\r\n  return (\r\n    <div style={{ padding: '8px', backgroundColor: '#fef2f2', borderRadius: '4px', textAlign: 'center' }}>\r\n      <div style={{ fontSize: '16px', fontWeight: '600', color: '#dc2626' }}>{value}</div>\r\n      <div style={{ fontSize: '11px', color: '#991b1b' }}>{label}</div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst actionBtnStyle = {\r\n  padding: '6px 14px',\r\n  border: '1px solid #d1d5db',\r\n  borderRadius: '6px',\r\n  backgroundColor: 'white',\r\n  cursor: 'pointer',\r\n  fontSize: '13px',\r\n  color: '#374151',\r\n};\r\n\r\nexport { EventLoopDashboard };\r\n","/**\r\n * TimerPlayground - Demonstrates correct ordering and behavior of different\r\n * async scheduling mechanisms in the event loop.\r\n *\r\n * Competency: Event Loop Understanding\r\n * Bug surface: timer event loop interference, setTimeout delay, callback ordering,\r\n *              microtask flooding, phase skipping, priority inversion\r\n */\r\n\r\nimport React, { useState, useCallback, memo } from 'react';\r\n\r\nconst TimerPlayground = memo(function TimerPlayground() {\r\n  const [log, setLog] = useState([]);\r\n  const [isRunning, setIsRunning] = useState(false);\r\n\r\n  const appendLog = (entries) => {\r\n    setLog(entries);\r\n  };\r\n\r\n  // Demonstrate the execution order of different async mechanisms\r\n  const runOrderingTest = useCallback(() => {\r\n    setIsRunning(true);\r\n    const entries = [];\r\n    const start = performance.now();\r\n\r\n    const addEntry = (label, mechanism) => {\r\n      entries.push({\r\n        order: entries.length + 1,\r\n        label,\r\n        mechanism,\r\n        time: (performance.now() - start).toFixed(2),\r\n      });\r\n    };\r\n\r\n    addEntry('Synchronous', 'sync');\r\n\r\n    // Microtask queue\r\n    queueMicrotask(() => {\r\n      addEntry('queueMicrotask', 'microtask');\r\n    });\r\n\r\n    // Promise (also microtask)\r\n    Promise.resolve().then(() => {\r\n      addEntry('Promise.resolve().then', 'microtask');\r\n    });\r\n\r\n    // setTimeout 0\r\n    setTimeout(() => {\r\n      addEntry('setTimeout(0)', 'macrotask');\r\n\r\n      // Nested microtask inside macrotask\r\n      queueMicrotask(() => {\r\n        addEntry('Nested microtask in setTimeout', 'microtask');\r\n      });\r\n\r\n      // rAF\r\n      requestAnimationFrame(() => {\r\n        addEntry('requestAnimationFrame', 'animation');\r\n\r\n        // requestIdleCallback (last priority)\r\n        if (typeof requestIdleCallback !== 'undefined') {\r\n          requestIdleCallback(() => {\r\n            addEntry('requestIdleCallback', 'idle');\r\n            appendLog([...entries]);\r\n            setIsRunning(false);\r\n          });\r\n        } else {\r\n          appendLog([...entries]);\r\n          setIsRunning(false);\r\n        }\r\n      });\r\n    }, 0);\r\n\r\n    // setTimeout 10ms\r\n    setTimeout(() => {\r\n      addEntry('setTimeout(10)', 'macrotask');\r\n    }, 10);\r\n\r\n    addEntry('Synchronous (end)', 'sync');\r\n  }, []);\r\n\r\n  // Demonstrate microtask flooding\r\n  const runMicrotaskDemo = useCallback(() => {\r\n    setIsRunning(true);\r\n    const entries = [];\r\n    const start = performance.now();\r\n\r\n    let timeoutFired = false;\r\n\r\n    setTimeout(() => {\r\n      timeoutFired = true;\r\n      entries.push({\r\n        order: entries.length + 1,\r\n        label: 'setTimeout (after microtasks)',\r\n        mechanism: 'macrotask',\r\n        time: (performance.now() - start).toFixed(2),\r\n      });\r\n      appendLog([...entries]);\r\n      setIsRunning(false);\r\n    }, 0);\r\n\r\n    // Queue 100 microtasks - they all run before the setTimeout\r\n    for (let i = 0; i < 100; i++) {\r\n      queueMicrotask(() => {\r\n        if (i === 0 || i === 49 || i === 99) {\r\n          entries.push({\r\n            order: entries.length + 1,\r\n            label: `Microtask #${i + 1} (setTimeout fired: ${timeoutFired})`,\r\n            mechanism: 'microtask',\r\n            time: (performance.now() - start).toFixed(2),\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    entries.push({\r\n      order: entries.length + 1,\r\n      label: 'Synchronous code (schedules 100 microtasks)',\r\n      mechanism: 'sync',\r\n      time: (performance.now() - start).toFixed(2),\r\n    });\r\n  }, []);\r\n\r\n  // Demonstrate Promise chaining timing\r\n  const runPromiseChainDemo = useCallback(() => {\r\n    setIsRunning(true);\r\n    const entries = [];\r\n    const start = performance.now();\r\n\r\n    const addEntry = (label, mechanism) => {\r\n      entries.push({\r\n        order: entries.length + 1,\r\n        label,\r\n        mechanism,\r\n        time: (performance.now() - start).toFixed(2),\r\n      });\r\n    };\r\n\r\n    setTimeout(() => {\r\n      addEntry('setTimeout(0)', 'macrotask');\r\n    }, 0);\r\n\r\n    Promise.resolve()\r\n      .then(() => addEntry('Promise chain 1', 'microtask'))\r\n      .then(() => addEntry('Promise chain 2', 'microtask'))\r\n      .then(() => addEntry('Promise chain 3', 'microtask'))\r\n      .then(() => {\r\n        addEntry('Promise chain 4 (final)', 'microtask');\r\n        setTimeout(() => {\r\n          appendLog([...entries]);\r\n          setIsRunning(false);\r\n        }, 50);\r\n      });\r\n\r\n    addEntry('Synchronous', 'sync');\r\n  }, []);\r\n\r\n  const getMechanismColor = (mechanism) => {\r\n    switch (mechanism) {\r\n      case 'sync': return '#6b7280';\r\n      case 'microtask': return '#8b5cf6';\r\n      case 'macrotask': return '#3b82f6';\r\n      case 'animation': return '#10b981';\r\n      case 'idle': return '#f59e0b';\r\n      default: return '#374151';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      backgroundColor: 'white',\r\n      borderRadius: '12px',\r\n      border: '1px solid #e5e7eb',\r\n    }}>\r\n      <h3 style={{ margin: '0 0 8px 0', fontSize: '18px', color: '#111827' }}>\r\n        Timer & Event Loop Playground\r\n      </h3>\r\n      <p style={{ fontSize: '13px', color: '#6b7280', marginBottom: '16px' }}>\r\n        Run experiments to understand event loop execution order.\r\n      </p>\r\n\r\n      <div style={{ display: 'flex', gap: '8px', marginBottom: '16px', flexWrap: 'wrap' }}>\r\n        <button onClick={runOrderingTest} disabled={isRunning} style={demoBtn}>\r\n          Execution Order\r\n        </button>\r\n        <button onClick={runMicrotaskDemo} disabled={isRunning} style={demoBtn}>\r\n          Microtask Flooding\r\n        </button>\r\n        <button onClick={runPromiseChainDemo} disabled={isRunning} style={demoBtn}>\r\n          Promise Chain\r\n        </button>\r\n        <button onClick={() => setLog([])} style={demoBtn}>\r\n          Clear\r\n        </button>\r\n      </div>\r\n\r\n      {/* Legend */}\r\n      <div style={{ display: 'flex', gap: '12px', marginBottom: '12px', flexWrap: 'wrap' }}>\r\n        {['sync', 'microtask', 'macrotask', 'animation', 'idle'].map((type) => (\r\n          <span key={type} style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '4px',\r\n            fontSize: '11px',\r\n            color: getMechanismColor(type),\r\n          }}>\r\n            <span style={{\r\n              width: '8px',\r\n              height: '8px',\r\n              borderRadius: '50%',\r\n              backgroundColor: getMechanismColor(type),\r\n            }} />\r\n            {type}\r\n          </span>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Log */}\r\n      <div style={{\r\n        maxHeight: '300px',\r\n        overflowY: 'auto',\r\n        border: '1px solid #e5e7eb',\r\n        borderRadius: '6px',\r\n        fontFamily: 'monospace',\r\n        fontSize: '12px',\r\n      }}>\r\n        {log.length === 0 ? (\r\n          <div style={{ padding: '20px', textAlign: 'center', color: '#9ca3af' }}>\r\n            Click a button to run an experiment\r\n          </div>\r\n        ) : (\r\n          log.map((entry, i) => (\r\n            <div key={i} style={{\r\n              display: 'flex',\r\n              gap: '8px',\r\n              padding: '6px 10px',\r\n              borderBottom: '1px solid #f3f4f6',\r\n              alignItems: 'center',\r\n            }}>\r\n              <span style={{ width: '20px', color: '#9ca3af', textAlign: 'right' }}>\r\n                {entry.order}\r\n              </span>\r\n              <span style={{\r\n                width: '8px',\r\n                height: '8px',\r\n                borderRadius: '50%',\r\n                backgroundColor: getMechanismColor(entry.mechanism),\r\n                flexShrink: 0,\r\n              }} />\r\n              <span style={{ flex: 1, color: '#1f2937' }}>{entry.label}</span>\r\n              <span style={{ color: '#6b7280', fontSize: '11px' }}>{entry.time}ms</span>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst demoBtn = {\r\n  padding: '6px 14px',\r\n  border: '1px solid #d1d5db',\r\n  borderRadius: '6px',\r\n  backgroundColor: 'white',\r\n  cursor: 'pointer',\r\n  fontSize: '13px',\r\n  color: '#374151',\r\n};\r\n\r\nexport { TimerPlayground };\r\n","/**\r\n * TaskScheduler - Schedules work across different event loop phases properly.\r\n * Uses requestIdleCallback, requestAnimationFrame, queueMicrotask, setTimeout.\r\n *\r\n * Competencies: Event Loop Optimization, Event Loop Understanding\r\n * Bug surface: phase confusion, priority misunderstanding, starvation, blocking,\r\n *              microtask flooding, timer interference, callback ordering\r\n */\r\n\r\nconst PRIORITY = {\r\n  CRITICAL: 0,   // queueMicrotask - runs before anything else in current tick\r\n  HIGH: 1,       // requestAnimationFrame - runs before next paint\r\n  NORMAL: 2,     // setTimeout(0) - runs in next macrotask\r\n  LOW: 3,        // requestIdleCallback - runs when browser is idle\r\n};\r\n\r\nclass TaskScheduler {\r\n  constructor() {\r\n    this.taskQueue = new Map();\r\n    this.taskIdCounter = 0;\r\n    this.isProcessing = false;\r\n    this.cancelTokens = new Map();\r\n  }\r\n\r\n  /**\r\n   * Schedule a task with a specific priority.\r\n   * Returns a cancel function.\r\n   */\r\n  schedule(task, priority = PRIORITY.NORMAL, options = {}) {\r\n    const taskId = ++this.taskIdCounter;\r\n    const taskEntry = {\r\n      id: taskId,\r\n      task,\r\n      priority,\r\n      scheduledAt: performance.now(),\r\n      options,\r\n    };\r\n\r\n    this.taskQueue.set(taskId, taskEntry);\r\n\r\n    let cancelToken;\r\n\r\n    switch (priority) {\r\n      case PRIORITY.CRITICAL:\r\n        queueMicrotask(() => this._executeTask(taskId));\r\n        break;\r\n\r\n      case PRIORITY.HIGH:\r\n        cancelToken = requestAnimationFrame(() => this._executeTask(taskId));\r\n        this.cancelTokens.set(taskId, { type: 'raf', token: cancelToken });\r\n        break;\r\n\r\n      case PRIORITY.NORMAL:\r\n        cancelToken = setTimeout(() => this._executeTask(taskId), options.delay || 0);\r\n        this.cancelTokens.set(taskId, { type: 'timeout', token: cancelToken });\r\n        break;\r\n\r\n      case PRIORITY.LOW:\r\n        if (typeof requestIdleCallback !== 'undefined') {\r\n          cancelToken = requestIdleCallback(\r\n            (deadline) => this._executeIdleTask(taskId, deadline),\r\n            { timeout: options.timeout || 5000 }\r\n          );\r\n          this.cancelTokens.set(taskId, { type: 'idle', token: cancelToken });\r\n        } else {\r\n          // Fallback for browsers without requestIdleCallback\r\n          cancelToken = setTimeout(() => this._executeTask(taskId), 50);\r\n          this.cancelTokens.set(taskId, { type: 'timeout', token: cancelToken });\r\n        }\r\n        break;\r\n\r\n      default:\r\n        cancelToken = setTimeout(() => this._executeTask(taskId), 0);\r\n        this.cancelTokens.set(taskId, { type: 'timeout', token: cancelToken });\r\n    }\r\n\r\n    return () => this._cancelTask(taskId);\r\n  }\r\n\r\n  /**\r\n   * Schedule a batch of work that yields to the event loop between chunks.\r\n   * Prevents blocking the main thread with long-running synchronous tasks.\r\n   */\r\n  async scheduleBatch(items, processFn, options = {}) {\r\n    const chunkSize = options.chunkSize || 10;\r\n    const yieldInterval = options.yieldInterval || 16; // ~1 frame\r\n    const results = [];\r\n    let lastYield = performance.now();\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n      results.push(processFn(items[i], i));\r\n\r\n      // Yield to event loop periodically\r\n      if (performance.now() - lastYield > yieldInterval) {\r\n        await this._yieldToEventLoop();\r\n        lastYield = performance.now();\r\n\r\n        if (options.onProgress) {\r\n          options.onProgress(i + 1, items.length);\r\n        }\r\n      }\r\n    }\r\n\r\n    return results;\r\n  }\r\n\r\n  /**\r\n   * Run a function during the next animation frame with measurement.\r\n   */\r\n  scheduleVisualUpdate(fn) {\r\n    return new Promise((resolve) => {\r\n      const token = requestAnimationFrame((timestamp) => {\r\n        const result = fn(timestamp);\r\n        resolve(result);\r\n      });\r\n      return () => cancelAnimationFrame(token);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Schedule work to run when the main thread is idle.\r\n   */\r\n  scheduleIdleWork(fn, timeout = 5000) {\r\n    return new Promise((resolve, reject) => {\r\n      if (typeof requestIdleCallback !== 'undefined') {\r\n        requestIdleCallback(\r\n          (deadline) => {\r\n            try {\r\n              const result = fn(deadline);\r\n              resolve(result);\r\n            } catch (err) {\r\n              reject(err);\r\n            }\r\n          },\r\n          { timeout }\r\n        );\r\n      } else {\r\n        setTimeout(() => {\r\n          try {\r\n            const result = fn({ timeRemaining: () => 50, didTimeout: false });\r\n            resolve(result);\r\n          } catch (err) {\r\n            reject(err);\r\n          }\r\n        }, 1);\r\n      }\r\n    });\r\n  }\r\n\r\n  getPendingCount() {\r\n    return this.taskQueue.size;\r\n  }\r\n\r\n  cancelAll() {\r\n    this.cancelTokens.forEach((cancel, taskId) => {\r\n      this._cancelTask(taskId);\r\n    });\r\n    this.taskQueue.clear();\r\n    this.cancelTokens.clear();\r\n  }\r\n\r\n  destroy() {\r\n    this.cancelAll();\r\n  }\r\n\r\n  // Private\r\n\r\n  _executeTask(taskId) {\r\n    const taskEntry = this.taskQueue.get(taskId);\r\n    if (!taskEntry) return;\r\n\r\n    this.taskQueue.delete(taskId);\r\n    this.cancelTokens.delete(taskId);\r\n\r\n    try {\r\n      const executionTime = performance.now() - taskEntry.scheduledAt;\r\n      taskEntry.task({ executionTime, taskId });\r\n    } catch (err) {\r\n      console.error(`[TaskScheduler] Task ${taskId} failed:`, err);\r\n    }\r\n  }\r\n\r\n  _executeIdleTask(taskId, deadline) {\r\n    const taskEntry = this.taskQueue.get(taskId);\r\n    if (!taskEntry) return;\r\n\r\n    this.taskQueue.delete(taskId);\r\n    this.cancelTokens.delete(taskId);\r\n\r\n    try {\r\n      taskEntry.task({\r\n        timeRemaining: deadline.timeRemaining(),\r\n        didTimeout: deadline.didTimeout,\r\n        taskId,\r\n      });\r\n    } catch (err) {\r\n      console.error(`[TaskScheduler] Idle task ${taskId} failed:`, err);\r\n    }\r\n  }\r\n\r\n  _cancelTask(taskId) {\r\n    this.taskQueue.delete(taskId);\r\n    const cancel = this.cancelTokens.get(taskId);\r\n\r\n    if (cancel) {\r\n      switch (cancel.type) {\r\n        case 'raf':\r\n          cancelAnimationFrame(cancel.token);\r\n          break;\r\n        case 'timeout':\r\n          clearTimeout(cancel.token);\r\n          break;\r\n        case 'idle':\r\n          if (typeof cancelIdleCallback !== 'undefined') {\r\n            cancelIdleCallback(cancel.token);\r\n          }\r\n          break;\r\n      }\r\n      this.cancelTokens.delete(taskId);\r\n    }\r\n  }\r\n\r\n  _yieldToEventLoop() {\r\n    return new Promise((resolve) => setTimeout(resolve, 0));\r\n  }\r\n}\r\n\r\nexport { TaskScheduler, PRIORITY };\r\n","/**\r\n * HeavyComputation - Component that offloads heavy work to avoid blocking the event loop.\r\n *\r\n * Competency: Event Loop Optimization, Event Loop Understanding\r\n * Bug surface: blocking event loop operations, event loop starvation, stalling,\r\n *              blocking IO, priority misunderstanding\r\n */\r\n\r\nimport React, { useState, useCallback, useRef, memo } from 'react';\r\nimport { TaskScheduler, PRIORITY } from '../../services/eventLoop/TaskScheduler';\r\n\r\nconst scheduler = new TaskScheduler();\r\n\r\nconst HeavyComputation = memo(function HeavyComputation() {\r\n  const [result, setResult] = useState(null);\r\n  const [progress, setProgress] = useState(0);\r\n  const [isRunning, setIsRunning] = useState(false);\r\n  const [mode, setMode] = useState('worker');\r\n  const cancelRef = useRef(null);\r\n\r\n  // Non-blocking computation using batch scheduling\r\n  const runNonBlocking = useCallback(async () => {\r\n    setIsRunning(true);\r\n    setProgress(0);\r\n    setResult(null);\r\n\r\n    const items = Array.from({ length: 10000 }, (_, i) => i);\r\n\r\n    try {\r\n      const results = await scheduler.scheduleBatch(\r\n        items,\r\n        (item) => {\r\n          // Simulate CPU-intensive work per item\r\n          let sum = 0;\r\n          for (let j = 0; j < 1000; j++) {\r\n            sum += Math.sqrt(item * j);\r\n          }\r\n          return sum;\r\n        },\r\n        {\r\n          chunkSize: 100,\r\n          yieldInterval: 8,\r\n          onProgress: (done, total) => {\r\n            setProgress(Math.round((done / total) * 100));\r\n          },\r\n        }\r\n      );\r\n\r\n      const total = results.reduce((a, b) => a + b, 0);\r\n      setResult({\r\n        sum: total.toFixed(2),\r\n        items: items.length,\r\n        method: 'Non-blocking (batch scheduler)',\r\n      });\r\n    } catch (err) {\r\n      setResult({ error: err.message });\r\n    }\r\n\r\n    setIsRunning(false);\r\n  }, []);\r\n\r\n  // Web Worker computation\r\n  const runWorker = useCallback(async () => {\r\n    setIsRunning(true);\r\n    setProgress(0);\r\n    setResult(null);\r\n\r\n    try {\r\n      const workerCode = `\r\n        self.onmessage = function(e) {\r\n          const { items } = e.data;\r\n          let processed = 0;\r\n          let sum = 0;\r\n          \r\n          for (let i = 0; i < items; i++) {\r\n            let itemSum = 0;\r\n            for (let j = 0; j < 1000; j++) {\r\n              itemSum += Math.sqrt(i * j);\r\n            }\r\n            sum += itemSum;\r\n            processed++;\r\n            \r\n            if (processed % 1000 === 0) {\r\n              self.postMessage({ type: 'progress', progress: Math.round((processed / items) * 100) });\r\n            }\r\n          }\r\n          \r\n          self.postMessage({ type: 'done', sum: sum.toFixed(2), items: items });\r\n        };\r\n      `;\r\n\r\n      const blob = new Blob([workerCode], { type: 'application/javascript' });\r\n      const workerUrl = URL.createObjectURL(blob);\r\n      const worker = new Worker(workerUrl);\r\n\r\n      worker.onmessage = (e) => {\r\n        if (e.data.type === 'progress') {\r\n          setProgress(e.data.progress);\r\n        } else if (e.data.type === 'done') {\r\n          setResult({\r\n            sum: e.data.sum,\r\n            items: e.data.items,\r\n            method: 'Web Worker (off main thread)',\r\n          });\r\n          setIsRunning(false);\r\n          worker.terminate();\r\n          URL.revokeObjectURL(workerUrl);\r\n        }\r\n      };\r\n\r\n      worker.onerror = (err) => {\r\n        setResult({ error: err.message });\r\n        setIsRunning(false);\r\n        worker.terminate();\r\n        URL.revokeObjectURL(workerUrl);\r\n      };\r\n\r\n      worker.postMessage({ items: 10000 });\r\n    } catch (err) {\r\n      setResult({ error: err.message });\r\n      setIsRunning(false);\r\n    }\r\n  }, []);\r\n\r\n  // Idle callback computation\r\n  const runIdle = useCallback(async () => {\r\n    setIsRunning(true);\r\n    setProgress(0);\r\n    setResult(null);\r\n\r\n    const totalItems = 10000;\r\n    let processed = 0;\r\n    let sum = 0;\r\n\r\n    const processChunk = (deadline) => {\r\n      while (processed < totalItems && (deadline.timeRemaining() > 0 || deadline.didTimeout)) {\r\n        let itemSum = 0;\r\n        for (let j = 0; j < 1000; j++) {\r\n          itemSum += Math.sqrt(processed * j);\r\n        }\r\n        sum += itemSum;\r\n        processed++;\r\n\r\n        if (processed % 500 === 0) {\r\n          setProgress(Math.round((processed / totalItems) * 100));\r\n        }\r\n      }\r\n\r\n      if (processed < totalItems) {\r\n        requestIdleCallback(processChunk, { timeout: 2000 });\r\n      } else {\r\n        setResult({\r\n          sum: sum.toFixed(2),\r\n          items: totalItems,\r\n          method: 'requestIdleCallback (idle time)',\r\n        });\r\n        setIsRunning(false);\r\n      }\r\n    };\r\n\r\n    requestIdleCallback(processChunk, { timeout: 2000 });\r\n  }, []);\r\n\r\n  // BLOCKING computation - runs synchronously on main thread (the anti-pattern)\r\n  // Bug surface: blocks event loop, freezes UI, prevents paint updates\r\n  const runBlocking = useCallback(() => {\r\n    setIsRunning(true);\r\n    setProgress(0);\r\n    setResult(null);\r\n\r\n    // Use setTimeout to allow the \"Processing...\" state to render first\r\n    setTimeout(() => {\r\n      const start = performance.now();\r\n      const items = 10000;\r\n      let sum = 0;\r\n\r\n      for (let i = 0; i < items; i++) {\r\n        for (let j = 0; j < 1000; j++) {\r\n          sum += Math.sqrt(i * j);\r\n        }\r\n      }\r\n\r\n      const elapsed = performance.now() - start;\r\n      setProgress(100);\r\n      setResult({\r\n        sum: sum.toFixed(2),\r\n        items,\r\n        method: `Main Thread BLOCKING (${elapsed.toFixed(0)}ms freeze)`,\r\n      });\r\n      setIsRunning(false);\r\n    }, 50);\r\n  }, []);\r\n\r\n  const handleRun = useCallback(() => {\r\n    switch (mode) {\r\n      case 'worker':\r\n        runWorker();\r\n        break;\r\n      case 'nonblocking':\r\n        runNonBlocking();\r\n        break;\r\n      case 'idle':\r\n        runIdle();\r\n        break;\r\n      case 'blocking':\r\n        runBlocking();\r\n        break;\r\n    }\r\n  }, [mode, runWorker, runNonBlocking, runIdle, runBlocking]);\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      backgroundColor: 'white',\r\n      borderRadius: '12px',\r\n      border: '1px solid #e5e7eb',\r\n    }}>\r\n      <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', color: '#111827' }}>\r\n        Heavy Computation\r\n      </h3>\r\n      <p style={{ fontSize: '13px', color: '#6b7280', marginBottom: '16px' }}>\r\n        Process 10,000 items with CPU-intensive calculations without blocking the event loop.\r\n      </p>\r\n\r\n      <div style={{ display: 'flex', gap: '12px', marginBottom: '16px', flexWrap: 'wrap' }}>\r\n        {[\r\n          { value: 'worker', label: 'Web Worker' },\r\n          { value: 'nonblocking', label: 'Batch Scheduler' },\r\n          { value: 'idle', label: 'Idle Callback' },\r\n          { value: 'blocking', label: 'Main Thread (BLOCKING)' },\r\n        ].map((opt) => (\r\n          <label key={opt.value} style={{ display: 'flex', alignItems: 'center', gap: '4px', fontSize: '13px', cursor: 'pointer' }}>\r\n            <input\r\n              type=\"radio\"\r\n              name=\"mode\"\r\n              value={opt.value}\r\n              checked={mode === opt.value}\r\n              onChange={(e) => setMode(e.target.value)}\r\n            />\r\n            {opt.label}\r\n          </label>\r\n        ))}\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleRun}\r\n        disabled={isRunning}\r\n        style={{\r\n          padding: '8px 20px',\r\n          backgroundColor: isRunning ? '#9ca3af' : '#3b82f6',\r\n          color: 'white',\r\n          border: 'none',\r\n          borderRadius: '6px',\r\n          cursor: isRunning ? 'not-allowed' : 'pointer',\r\n          fontSize: '13px',\r\n          marginBottom: '16px',\r\n        }}\r\n      >\r\n        {isRunning ? 'Processing...' : 'Run Computation'}\r\n      </button>\r\n\r\n      {isRunning && (\r\n        <div style={{ marginBottom: '12px' }}>\r\n          <div style={{\r\n            height: '6px',\r\n            backgroundColor: '#e5e7eb',\r\n            borderRadius: '3px',\r\n            overflow: 'hidden',\r\n          }}>\r\n            <div style={{\r\n              height: '100%',\r\n              width: `${progress}%`,\r\n              backgroundColor: '#3b82f6',\r\n              borderRadius: '3px',\r\n              transition: 'width 0.1s',\r\n            }} />\r\n          </div>\r\n          <div style={{ fontSize: '12px', color: '#6b7280', marginTop: '4px' }}>{progress}%</div>\r\n        </div>\r\n      )}\r\n\r\n      {result && !result.error && (\r\n        <div style={{ padding: '12px', backgroundColor: '#f0fdf4', borderRadius: '6px', border: '1px solid #bbf7d0' }}>\r\n          <div style={{ fontSize: '14px', color: '#166534', fontWeight: '500' }}>\r\n            Computation complete!\r\n          </div>\r\n          <div style={{ fontSize: '12px', color: '#15803d', marginTop: '4px' }}>\r\n            Sum: {result.sum} | Items: {result.items} | Method: {result.method}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {result?.error && (\r\n        <div style={{ padding: '12px', backgroundColor: '#fef2f2', borderRadius: '6px', border: '1px solid #fecaca' }}>\r\n          <div style={{ fontSize: '14px', color: '#991b1b' }}>Error: {result.error}</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport { HeavyComputation };\r\n","/**\r\n * AnalyticsPage - Lazy loaded route page for analytics + event loop.\r\n *\r\n * Competency: Bundle Optimization, Event Loop Optimization, Suspense Data Fetching,\r\n *             React Suspense Implementation\r\n */\r\n\r\nimport React from 'react';\r\nimport { AnalyticsChartWrapper } from '../components/analytics/AnalyticsChart';\r\nimport { EventLoopDashboard } from '../components/analytics/EventLoopDashboard';\r\nimport { TimerPlayground } from '../components/analytics/TimerPlayground';\r\nimport { HeavyComputation } from '../components/analytics/HeavyComputation';\r\n\r\nfunction AnalyticsPage() {\r\n  return (\r\n    <div style={{ padding: '20px', display: 'flex', flexDirection: 'column', gap: '20px' }}>\r\n      <h2 style={{ margin: 0, fontSize: '24px', color: '#111827' }}>Analytics</h2>\r\n\r\n      {/* Analytics data via Suspense with refresh/invalidation */}\r\n      <AnalyticsChartWrapper />\r\n\r\n      {/* Event Loop Health */}\r\n      <EventLoopDashboard />\r\n\r\n      {/* Timer Playground */}\r\n      <TimerPlayground />\r\n\r\n      {/* Heavy Computation Demo */}\r\n      <HeavyComputation />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AnalyticsPage;\r\n"],"names":["analyticsEntry","readAnalytics","get","d","e","invalidateAnalyticsCache","AnalyticsChartWrapper","memo","refreshKey","setRefreshKey","useState","handleRefresh","useCallback","k","jsxs","jsx","SuspenseBoundary","SkeletonDashboard","AnalyticsChart","response","summary","timeSeries","chartBars","useMemo","maxRequests","point","SummaryCard","bar","i","label","value","EventLoopProfiler","results","resolve","order","timestamp","deadline","blockDurationMs","metrics","timeoutStart","rAFStart","microtaskStart","blockEnd","intervalMs","sample","start","lag","entry","session","samples","lags","s","a","b","arr","p","sorted","index","profiler","EventLoopDashboard","health","useEventLoopHealth","phaseResults","setPhaseResults","blockingResults","setBlockingResults","isMeasuring","setIsMeasuring","measurePhases","err","measureBlocking","getHealthColor","score","HealthMetric","actionBtnStyle","_a","phase","_b","BlockingMetric","_c","_d","_e","color","TimerPlayground","log","setLog","isRunning","setIsRunning","appendLog","entries","runOrderingTest","addEntry","mechanism","runMicrotaskDemo","timeoutFired","runPromiseChainDemo","getMechanismColor","demoBtn","type","PRIORITY","TaskScheduler","task","priority","options","taskId","taskEntry","cancelToken","items","processFn","yieldInterval","lastYield","fn","token","result","timeout","reject","cancel","executionTime","scheduler","HeavyComputation","setResult","progress","setProgress","mode","setMode","useRef","runNonBlocking","_","total","item","sum","j","done","runWorker","workerCode","blob","workerUrl","worker","runIdle","totalItems","processed","processChunk","itemSum","runBlocking","elapsed","handleRun","opt","AnalyticsPage"],"mappings":"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"}